# timezone

IF(TD_LINUX)
    SET(TZ_OUTPUT_PATH /usr/share/zoneinfo)
ELSEIF(TD_DARWIN)
    SET(TZ_OUTPUT_PATH /var/db/timezone/zoneinfo)
ENDIF()

ExternalProject_Add(ext_tz
        GIT_REPOSITORY https://github.com/eggert/tz.git
        GIT_TAG main
        PREFIX "${TD_CONTRIB_DIR}/tz"
        BUILD_IN_SOURCE true
        CONFIGURE_COMMAND ""
        BUILD_COMMAND make CFLAGS+=-fPIC CFLAGS+=-DTHREAD_SAFE=1 TZDIR=${TZ_OUTPUT_PATH}/ clean tzdir.h
        INSTALL_COMMAND make DESTDIR=${TD_CONTRIB_DIR}/tz/install install
        TEST_COMMAND ""
        GIT_SHALLOW true
)

# set(TD_CONTRIB_EXT_TZ_INC_DIR "${TD_CONTRIB_DIR}/tz/install/usr/include" PARENT_SCOPE)
set(TD_CONTRIB_EXT_TZ_LIB_DIR "${TD_CONTRIB_DIR}/tz/install/usr/lib" PARENT_SCOPE)

