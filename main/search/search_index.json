{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to TDengine Cases Docs","text":"<p>You can switch branches on this page. For more information about how to run cases, see README.</p> <p>Case list can be found on the top bar case list docs.</p> <p>For more information about how to write new case docstring format, see Test Case Specification</p>"},{"location":"case_list_docs/demo/","title":"Demo","text":""},{"location":"case_list_docs/demo/#demo.test_demo","title":"<code>demo.test_demo</code>","text":""},{"location":"case_list_docs/demo/#demo.test_demo.TestDemo","title":"<code>TestDemo</code>","text":""},{"location":"case_list_docs/demo/#demo.test_demo.TestDemo.test_demo","title":"<code>test_demo()</code>","text":"<p>\u6d4b\u8bd5demo</p> <p>\u5c55\u793a\u57fa\u672cjql\u64cd\u4f5c\u5199\u6cd5</p> <p>Since: v3.3.0.0</p> <p>Labels: demo</p> <p>Jira: None</p> History <ul> <li>2024-2-6 Feng Chao Created</li> <li>2025-3-10 Huo Hong Migrated to new test framework</li> </ul>"},{"location":"case_list_docs/stream/","title":"Stream","text":""},{"location":"case_list_docs/stream/#stream.test_max_delay_interval","title":"<code>stream.test_max_delay_interval</code>","text":""},{"location":"case_list_docs/tmq/","title":"Tmq","text":""},{"location":"case_list_docs/tmq/#tmq.test_drop_lost_comsumers","title":"<code>tmq.test_drop_lost_comsumers</code>","text":""},{"location":"case_list_docs/tmq/#tmq.test_drop_lost_comsumers.TestDropLostConsumers","title":"<code>TestDropLostConsumers</code>","text":""},{"location":"case_list_docs/tmq/#tmq.test_drop_lost_comsumers.TestDropLostConsumers.caseDescription","title":"<code>caseDescription()</code>","text":"<p>drop_lost_consmuers: 1. verifying that the boundary and valid values of session_timeout_ms are in effect 2. verifying that the boundary and valid values of max_poll_interval_ms are in effect 3. verifying that consumer will be closed when the session_timeout_ms and max_poll_interval_ms is expired"},{"location":"case_list_docs/tmq/#tmq.test_drop_lost_comsumers.TestDropLostConsumers.case_session_timeout","title":"<code>case_session_timeout()</code>","text":"<p>TEST CASE: verifying that the boundary and valid values of session_timeout_ms are in effect</p>"},{"location":"case_list_docs/tmq/#tmq.test_drop_lost_comsumers.TestDropLostConsumers.test_case_max_poll_timeout","title":"<code>test_case_max_poll_timeout()</code>","text":"<p>session_timeout_ms \u548c max_poll_interval_ms \u5230\u671f\u540econsumer\u5173\u95ed</p> <p>session_timeout_ms \u548c max_poll_interval_ms \u5230\u671f\u540econsumer\u5173\u95ed</p> <p>Since: v3.3.0.0</p> <p>Labels: common,ci</p> <p>Jira: TD-12345,TS-1234</p> History <ul> <li>2024-2-6 Feng Chao Created</li> <li>2025-2-26 Huo Hong Migrated to new test framework</li> </ul>"},{"location":"case_list_docs/tmq/#tmq.test_tmq_params","title":"<code>tmq.test_tmq_params</code>","text":""},{"location":"case_list_docs/tsim/","title":"Tsim","text":""},{"location":"case_list_docs/tsim/#tsim.test_tsim","title":"<code>tsim.test_tsim</code>","text":""},{"location":"case_list_docs/data_write/sql_statement/","title":"Sql statement","text":""},{"location":"case_list_docs/data_write/sql_statement/#data_write.sql_statement.test_insert_double","title":"<code>data_write.sql_statement.test_insert_double</code>","text":""},{"location":"case_list_docs/data_write/sql_statement/#data_write.sql_statement.test_insert_double.TestInsertDouble","title":"<code>TestInsertDouble</code>","text":""},{"location":"case_list_docs/data_write/sql_statement/#data_write.sql_statement.test_insert_double.TestInsertDouble.test_insert_double","title":"<code>test_insert_double()</code>","text":"<p>\u6d4b\u8bd5\u63d2\u5165\u5404\u79cddouble\u503c</p> <p>\u63d2\u5165\u5404\u79cddouble\u503c\u5305\u62ec\u6b63\u8d1f\u503c\u3001\u79d1\u5b66\u8ba1\u6570\u6cd5\u3001\u5341\u516d\u8fdb\u5236\u3001\u4e8c\u8fdb\u5236\u3001\u5b57\u7b26\u4e32</p> <p>Since: v3.0.0.0</p> <p>Labels: common,ci</p> <p>Jira: None</p> History <ul> <li>2024-2-6 Feng Chao Created</li> <li>2025-2-26 Huo Hong Migrated to new test framework</li> </ul>"},{"location":"case_list_docs/high_availability/cluster_expansion_reduction/","title":"Cluster expansion reduction","text":""},{"location":"case_list_docs/high_availability/cluster_expansion_reduction/#high_availability.cluster_expansion_reduction.test_5dnode_3mnode_stop","title":"<code>high_availability.cluster_expansion_reduction.test_5dnode_3mnode_stop</code>","text":""},{"location":"case_list_docs/high_availability/cluster_expansion_reduction/#high_availability.cluster_expansion_reduction.test_5dnode_3mnode_stop.Test5dnode3mnodeStop","title":"<code>Test5dnode3mnodeStop</code>","text":""},{"location":"case_list_docs/high_availability/cluster_expansion_reduction/#high_availability.cluster_expansion_reduction.test_5dnode_3mnode_stop.Test5dnode3mnodeStop.test_five_dnode_three_mnode","title":"<code>test_five_dnode_three_mnode()</code>","text":"<p>\u6d4b\u8bd5\u591a\u8282\u70b9\u96c6\u7fa4\u7f29\u6269\u5bb9\u540emnode\u72b6\u6001</p> <p>5\u8282\u70b9\u96c6\u7fa4\u505c\u6b62\u3001\u542f\u52a8\u5404\u4e2adnode\u540e, \u68c0\u67e5mnode\u72b6\u6001</p> <p>Since: v3.3.0.0</p> <p>Labels: cluster,ci</p> <p>Jira: None</p> History <ul> <li>2024-2-6 Feng Chao Created</li> <li>2025-3-10 Huo Hong Migrated to new test framework</li> </ul>"},{"location":"case_list_docs/high_availability/cluster_expansion_reduction/#high_availability.cluster_expansion_reduction.test_cluster_basic","title":"<code>high_availability.cluster_expansion_reduction.test_cluster_basic</code>","text":""},{"location":"case_list_docs/high_availability/cluster_expansion_reduction/#high_availability.cluster_expansion_reduction.test_cluster_basic.TestClusterBasic","title":"<code>TestClusterBasic</code>","text":""},{"location":"case_list_docs/high_availability/cluster_expansion_reduction/#high_availability.cluster_expansion_reduction.test_cluster_basic.TestClusterBasic.test_check_cluster_empty_db","title":"<code>test_check_cluster_empty_db()</code>","text":"<p>\u6d4b\u8bd5\u591a\u8282\u70b9\u96c6\u7fa4\u7f29\u51cf</p> <p>5\u8282\u70b9\u96c6\u7fa4\u505c\u6b62\u4e24\u4e2adnode\u540ecluster\u72b6\u6001\u4ecd\u4e3aalive</p> <p>Since: v3.3.0.0</p> <p>Labels: cluster</p> <p>Jira: None</p> History <ul> <li>2024-2-6 Feng Chao Created</li> <li>2025-3-10 Huo Hong Migrated to new test framework</li> </ul>"},{"location":"case_list_docs/high_availability/cluster_expansion_reduction/#high_availability.cluster_expansion_reduction.test_cluster_basic.TestClusterBasic.test_check_cluster_with_db","title":"<code>test_check_cluster_with_db()</code>","text":"<p>\u6d4b\u8bd5\u591a\u8282\u70b9\u96c6\u7fa4\u6269\u5bb9</p> <p>5\u8282\u70b9\u96c6\u7fa4\u521b\u5efa\u6570\u636e\u5e93,\u7f29\u51cf\u96c6\u7fa4\u52303\u8282\u70b9\u540e,cluster\u72b6\u6001\u4ecd\u4e3aalive</p> <p>Since: v3.3.0.0</p> <p>Labels: cluster</p> <p>Jira: None </p> History <ul> <li>2024-2-6 Feng Chao Created</li> <li>2025-3-10 Huo Hong Migrated to new test framework</li> </ul>"},{"location":"case_list_docs/high_availability/cluster_expansion_reduction/#high_availability.cluster_expansion_reduction.test_5dnode_3mnode_add_1dnode","title":"<code>high_availability.cluster_expansion_reduction.test_5dnode_3mnode_add_1dnode</code>","text":""},{"location":"case_list_docs/high_availability/cluster_expansion_reduction/#high_availability.cluster_expansion_reduction.test_5dnode_3mnode_add_1dnode.Test5dnode3mnodeAdd1Dnode","title":"<code>Test5dnode3mnodeAdd1Dnode</code>","text":""},{"location":"case_list_docs/high_availability/cluster_expansion_reduction/#high_availability.cluster_expansion_reduction.test_5dnode_3mnode_add_1dnode.Test5dnode3mnodeAdd1Dnode._async_raise","title":"<code>_async_raise(tid, exctype)</code>","text":"<p>raises the exception, performs cleanup if needed</p>"},{"location":"case_list_docs/metadata/db/","title":"Db","text":""},{"location":"case_list_docs/metadata/db/#metadata.db.test_keep_time_offset","title":"<code>metadata.db.test_keep_time_offset</code>","text":""},{"location":"case_list_docs/storage/compress/","title":"Compress","text":""},{"location":"case_list_docs/storage/compress/#storage.compress.test_compress_basic","title":"<code>storage.compress.test_compress_basic</code>","text":""},{"location":"case_list_docs/storage/multilevel/","title":"Multilevel","text":""},{"location":"case_list_docs/storage/multilevel/#storage.multilevel.test_mlevel_basic","title":"<code>storage.multilevel.test_mlevel_basic</code>","text":""},{"location":"case_list_docs/storage/tsma/","title":"Tsma","text":""},{"location":"case_list_docs/storage/tsma/#storage.tsma.test_tsma","title":"<code>storage.tsma.test_tsma</code>","text":""},{"location":"case_list_docs/tools/benchmark/","title":"Benchmark","text":""},{"location":"case_list_docs/tools/benchmark/#tools.benchmark.test_taosdemo_query_with_json","title":"<code>tools.benchmark.test_taosdemo_query_with_json</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/","title":"Utils","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#__init__","title":"<code>__init__</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.BeforeTest","title":"<code>BeforeTest</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.BeforeTest.create_database","title":"<code>create_database(request, db_name, host, port)</code>","text":"<p>\u521b\u5efamodule\u7ea7\u522b\u7684\u6570\u636e\u5e93</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.BeforeTest.deploy_taos","title":"<code>deploy_taos(yaml_file, mnodes_num=1)</code>","text":"<p>get env directory from request; use yaml file for tostest run;</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.ClusterComCheck","title":"<code>ClusterComCheck</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.ClusterComCheck.check_vgroups_status","title":"<code>check_vgroups_status(vgroup_numbers=2, db_replica=3, count_number=10, db_name='db')</code>","text":"<p>check vgroups status in 10s after db vgroups status is changed</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.ClusterComCheck.check_vgroups_status_with_offline","title":"<code>check_vgroups_status_with_offline(vgroup_numbers=2, db_replica=3, count_number=10, db_name='db')</code>","text":"<p>n nodes cluster, 3 replica database return 1, n leaders, stable status return 2, 0 &lt; num of leader &lt; n, stable status return 0, no leader, stable status return -1, Elections not yet completed, unstable status</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.ClusterDnodes","title":"<code>ClusterDnodes</code>","text":"<p>rewrite TDDnodes and make MyDdnodes as TDDnodes child class</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.ConfigureyCluster","title":"<code>ConfigureyCluster</code>","text":"<p>This will create defined number of dnodes and create a cluster. at the same time, it will return TDDnodes list:  dnodes,</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom","title":"<code>TDCom</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.cal_watermark_window_close_interval_endts","title":"<code>cal_watermark_window_close_interval_endts(start_ts, interval, watermark=None)</code>","text":"<p>cal endts for close window</p> <p>Parameters:</p> Name Type Description Default <code>start_ts</code> <code>epoch time</code> <p>self.date_time</p> required <code>interval</code> <code>int</code> <p>[s]</p> required <code>watermark</code> <code>int</code> <p>[s]. Defaults to None.</p> <code>None</code> <p>Returns:</p> Name Type Description <code>_type_</code> <p>description</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.cal_watermark_window_close_session_endts","title":"<code>cal_watermark_window_close_session_endts(start_ts, watermark=None, session=None)</code>","text":"<p>cal endts for close window</p> <p>Parameters:</p> Name Type Description Default <code>start_ts</code> <code>epoch time</code> <p>self.date_time</p> required <code>watermark</code> <code>int</code> <p>session. Defaults to None.</p> <code>None</code> <code>session</code> <code>int</code> <p>Defaults to None.</p> <code>None</code> <p>Returns:</p> Name Type Description <code>int</code> <p>as followed</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.cast_query_data","title":"<code>cast_query_data(query_data)</code>","text":"<p>cast query-result for existed-stb</p> <p>Parameters:</p> Name Type Description Default <code>query_data</code> <code>list</code> <p>query data list</p> required <p>Returns:</p> Name Type Description <code>list</code> <p>new list after cast</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.check_query_data","title":"<code>check_query_data(sql1, sql2, sorted=False, fill_value=None, tag_value_list=None, defined_tag_count=None, partition=True, use_exist_stb=False, subtable=None, reverse_check=False)</code>","text":"<p>confirm query result</p> <p>Parameters:</p> Name Type Description Default <code>sql1</code> <code>str</code> <p>select ....</p> required <code>sql2</code> <code>str</code> <p>select ....</p> required <code>sorted</code> <code>bool</code> <p>if sort result list. Defaults to False.</p> <code>False</code> <code>fill_value</code> <code>str</code> <p>fill. Defaults to None.</p> <code>None</code> <code>tag_value_list</code> <code>list</code> <p>Defaults to None.</p> <code>None</code> <code>defined_tag_count</code> <code>int</code> <p>Defaults to None.</p> <code>None</code> <code>partition</code> <code>bool</code> <p>Defaults to True.</p> <code>True</code> <code>use_exist_stb</code> <code>bool</code> <p>Defaults to False.</p> <code>False</code> <code>subtable</code> <code>str</code> <p>Defaults to None.</p> <code>None</code> <code>reverse_check</code> <code>bool</code> <p>not equal. Defaults to False.</p> <code>False</code> <p>Returns:</p> Name Type Description <code>bool</code> <p>False if failed</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.check_stream","title":"<code>check_stream(sql1, sql2, expected_count, max_delay=None)</code>","text":"<p>confirm stream</p> <p>Parameters:</p> Name Type Description Default <code>sql1</code> <code>str</code> <p>select ...</p> required <code>sql2</code> <code>str</code> <p>select ...</p> required <code>expected_count</code> <code>int</code> <p>expected_count</p> required <code>max_delay</code> <code>int</code> <p>max_delay value. Defaults to None.</p> <code>None</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.check_stream_field_type","title":"<code>check_stream_field_type(sql, input_function)</code>","text":"<p>confirm stream field</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>input sql</p> required <code>input_function</code> <code>str</code> <p>scalar</p> required"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.check_stream_res","title":"<code>check_stream_res(sql, expected_res, max_delay)</code>","text":"<p>confirm stream result</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>select ...</p> required <code>expected_res</code> <code>str</code> <p>expected result</p> required <code>max_delay</code> <code>int</code> <p>max_delay value</p> required <p>Returns:</p> Name Type Description <code>bool</code> <p>False if failed</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.check_stream_task_status","title":"<code>check_stream_task_status(stream_name, vgroups, stream_timeout=0, check_wal_info=True)</code>","text":"<p>check stream status</p> <p>Parameters:</p> Name Type Description Default <code>stream_name</code> <code>str</code> <p>stream_name</p> required <code>vgroups</code> <code>int</code> <p>vgroups</p> required <p>Returns:     str: status</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.cleanTb","title":"<code>cleanTb(type='taosc', dbname='db')</code>","text":"<p>type is taosc or restful</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.clean_env","title":"<code>clean_env()</code>","text":"<p>drop all streams and databases</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.create_stream","title":"<code>create_stream(stream_name, des_table, source_sql, trigger_mode=None, watermark=None, max_delay=None, ignore_expired=None, ignore_update=None, subtable_value=None, fill_value=None, fill_history_value=None, stb_field_name_value=None, tag_value=None, use_exist_stb=False, use_except=False)</code>","text":"<p>create_stream</p> <p>Parameters:</p> Name Type Description Default <code>stream_name</code> <code>str</code> <p>stream_name</p> required <code>des_table</code> <code>str</code> <p>target stable</p> required <code>source_sql</code> <code>str</code> <p>stream sql</p> required <code>trigger_mode</code> <code>str</code> <p>at_once/window_close/max_delay. Defaults to None.</p> <code>None</code> <code>watermark</code> <code>str</code> <p>watermark time. Defaults to None.</p> <code>None</code> <code>max_delay</code> <code>str</code> <p>max_delay time. Defaults to None.</p> <code>None</code> <code>ignore_expired</code> <code>int</code> <p>ignore expired data. Defaults to None.</p> <code>None</code> <code>ignore_update</code> <code>int</code> <p>ignore update data. Defaults to None.</p> <code>None</code> <code>subtable_value</code> <code>str</code> <p>subtable. Defaults to None.</p> <code>None</code> <code>fill_value</code> <code>str</code> <p>fill. Defaults to None.</p> <code>None</code> <code>fill_history_value</code> <code>int</code> <p>0/1. Defaults to None.</p> <code>None</code> <code>stb_field_name_value</code> <code>str</code> <p>existed stb. Defaults to None.</p> <code>None</code> <code>tag_value</code> <code>str</code> <p>custom tag. Defaults to None.</p> <code>None</code> <code>use_exist_stb</code> <code>bool</code> <p>use existed stb tag. Defaults to False.</p> <code>False</code> <code>use_except</code> <code>bool</code> <p>Exception tag. Defaults to False.</p> <code>False</code> <p>Returns:</p> Name Type Description <code>str</code> <p>stream</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.drop_all_db","title":"<code>drop_all_db()</code>","text":"<p>drop all databases</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.drop_all_streams","title":"<code>drop_all_streams()</code>","text":"<p>drop all streams</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.drop_db","title":"<code>drop_db(dbname='test')</code>","text":"<p>drop a db</p> <p>Parameters:</p> Name Type Description Default <code>dbname</code> <code>str</code> <p>Defaults to \"test\".</p> <code>'test'</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.float_handle","title":"<code>float_handle(input_list)</code>","text":"<p>float list elem</p> <p>Parameters:</p> Name Type Description Default <code>input_list</code> <code>list</code> <p>input value list</p> required <p>Returns:</p> Name Type Description <code>_type_</code> <p>float list</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.genTs","title":"<code>genTs(precision='ms', ts='', protype='taosc', ns_tag=None)</code>","text":"<p>generate ts</p> <p>Parameters:</p> Name Type Description Default <code>precision</code> <code>str</code> <p>db precision. Defaults to \"ms\".</p> <code>'ms'</code> <code>ts</code> <code>str</code> <p>input ts. Defaults to \"\".</p> <code>''</code> <code>protype</code> <code>str</code> <p>\"taosc\" or \"restful\". Defaults to \"taosc\".</p> <code>'taosc'</code> <code>ns_tag</code> <code>_type_</code> <p>use ns. Defaults to None.</p> <code>None</code> <p>Returns:</p> Type Description <p>timestamp, datetime: timestamp and datetime</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.gen_tag_col_str","title":"<code>gen_tag_col_str(gen_type, data_type, count)</code>","text":"<p>gen multi tags or cols by gen_type</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.getLongName","title":"<code>getLongName(len, mode='mixed')</code>","text":"<p>generate long name mode could be numbers/letters/letters_mixed/mixed</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.get_long_name","title":"<code>get_long_name(length=10, mode='letters')</code>","text":"<p>generate long name mode could be numbers/letters/letters_mixed/mixed</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.get_timestamp_n_days_later","title":"<code>get_timestamp_n_days_later(n=30)</code>","text":"<p>Get the timestamp of a date n days later from the current date.</p> <p>Parameters:</p> Name Type Description Default <code>n</code> <code>int</code> <p>Number of days to add to the current date. Default is 30.</p> <code>30</code> <p>Returns:</p> Name Type Description <code>int</code> <p>Timestamp of the date n days later, in milliseconds.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.pause_stream","title":"<code>pause_stream(stream_name, if_exist=True, if_not_exist=False)</code>","text":"<p>pause_stream</p> <p>Parameters:</p> Name Type Description Default <code>stream_name</code> <code>str</code> <p>stream_name</p> required <code>if_exist</code> <code>bool</code> <p>Defaults to True.</p> <code>True</code> <code>if_not_exist</code> <code>bool</code> <p>Defaults to False.</p> <code>False</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.prepare_data","title":"<code>prepare_data(interval=None, watermark=None, session=None, state_window=None, state_window_max=127, interation=3, range_count=None, precision='ms', fill_history_value=0, ext_stb=None, custom_col_index=None, col_value_type='random')</code>","text":"<p>prepare stream data</p> <p>Parameters:</p> Name Type Description Default <code>interval</code> <code>int</code> <p>Defaults to None.</p> <code>None</code> <code>watermark</code> <code>int</code> <p>Defaults to None.</p> <code>None</code> <code>session</code> <code>int</code> <p>Defaults to None.</p> <code>None</code> <code>state_window</code> <code>str</code> <p>Defaults to None.</p> <code>None</code> <code>state_window_max</code> <code>int</code> <p>Defaults to 127.</p> <code>127</code> <code>interation</code> <code>int</code> <p>Defaults to 3.</p> <code>3</code> <code>range_count</code> <code>int</code> <p>Defaults to None.</p> <code>None</code> <code>precision</code> <code>str</code> <p>Defaults to \"ms\".</p> <code>'ms'</code> <code>fill_history_value</code> <code>int</code> <p>Defaults to 0.</p> <code>0</code> <code>ext_stb</code> <code>bool</code> <p>Defaults to None.</p> <code>None</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.resume_stream","title":"<code>resume_stream(stream_name, if_exist=True, if_not_exist=False, ignore_untreated=False)</code>","text":"<p>resume_stream</p> <p>Parameters:</p> Name Type Description Default <code>stream_name</code> <code>str</code> <p>stream_name</p> required <code>if_exist</code> <code>bool</code> <p>Defaults to True.</p> <code>True</code> <code>if_not_exist</code> <code>bool</code> <p>Defaults to False.</p> <code>False</code> <code>ignore_untreated</code> <code>bool</code> <p>Defaults to False.</p> <code>False</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.round_handle","title":"<code>round_handle(input_list)</code>","text":"<p>round list elem</p> <p>Parameters:</p> Name Type Description Default <code>input_list</code> <code>list</code> <p>input value list</p> required <p>Returns:</p> Name Type Description <code>_type_</code> <p>round list</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.screateDb","title":"<code>screateDb(dbname='test', drop_db=True, **kwargs)</code>","text":"<p>create database</p> <p>Parameters:</p> Name Type Description Default <code>dbname</code> <code>str</code> <p>Defaults to \"test\".</p> <code>'test'</code> <code>drop_db</code> <code>bool</code> <p>Defaults to True.</p> <code>True</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.screate_ctable","title":"<code>screate_ctable(dbname=None, stbname=None, ctbname='ctb', use_name='table', tag_elm_list=None, ts_value=None, count=1, default_varchar_datatype='letters', default_nchar_datatype='letters', default_ctbname_prefix='ctb', default_ctbname_index_start_num=1, **kwargs)</code>","text":"<p>summary</p> <p>Parameters:</p> Name Type Description Default <code>dbname</code> <code>str</code> <p>Defaults to None.</p> <code>None</code> <code>stbname</code> <code>str</code> <p>Defaults to None.</p> <code>None</code> <code>ctbname</code> <code>str</code> <p>Defaults to \"ctb\".</p> <code>'ctb'</code> <code>use_name</code> <code>str</code> <p>Defaults to \"table\".</p> <code>'table'</code> <code>tag_elm_list</code> <code>list</code> <p>use for sgen_tag_type_str(), Defaults to None.</p> <code>None</code> <code>ts_value</code> <code>timestamp</code> <p>Defaults to None.</p> <code>None</code> <code>count</code> <code>int</code> <p>ctb count, Defaults to 1.</p> <code>1</code> <code>default_varchar_datatype</code> <code>str</code> <p>Defaults to \"letters\".</p> <code>'letters'</code> <code>default_nchar_datatype</code> <code>str</code> <p>Defaults to \"letters\".</p> <code>'letters'</code> <code>default_ctbname_prefix</code> <code>str</code> <p>Defaults to \"ctb\".</p> <code>'ctb'</code> <code>default_ctbname_index_start_num</code> <code>int</code> <p>Defaults to 1.</p> <code>1</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.screate_stable","title":"<code>screate_stable(dbname=None, stbname='stb', use_name='table', column_elm_list=None, tag_elm_list=None, need_tagts=False, count=1, default_stbname_prefix='stb', default_stbname_index_start_num=1, default_column_index_start_num=1, default_tag_index_start_num=1, **kwargs)</code>","text":"<p>summary</p> <p>Parameters:</p> Name Type Description Default <code>dbname</code> <code>str</code> <p>Defaults to None.</p> <code>None</code> <code>stbname</code> <code>str</code> <p>Defaults to \"stb\".</p> <code>'stb'</code> <code>use_name</code> <code>str</code> <p>stable/table, Defaults to \"table\".</p> <code>'table'</code> <code>column_elm_list</code> <code>list</code> <p>use for sgen_column_type_str(), Defaults to None.</p> <code>None</code> <code>tag_elm_list</code> <code>list</code> <p>use for sgen_tag_type_str(), Defaults to None.</p> <code>None</code> <code>need_tagts</code> <code>bool</code> <p>tag use timestamp, Defaults to False.</p> <code>False</code> <code>count</code> <code>int</code> <p>stable count, Defaults to 1.</p> <code>1</code> <code>default_stbname_prefix</code> <code>str</code> <p>Defaults to \"stb\".</p> <code>'stb'</code> <code>default_stbname_index_start_num</code> <code>int</code> <p>Defaults to 1.</p> <code>1</code> <code>default_column_index_start_num</code> <code>int</code> <p>Defaults to 1.</p> <code>1</code> <code>default_tag_index_start_num</code> <code>int</code> <p>Defaults to 1.</p> <code>1</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.screate_table","title":"<code>screate_table(dbname=None, tbname='tb', use_name='table', column_elm_list=None, count=1, default_tbname_prefix='tb', default_tbname_index_start_num=1, default_column_index_start_num=1, **kwargs)</code>","text":"<p>create ctable</p> <p>Parameters:</p> Name Type Description Default <code>dbname</code> <code>str</code> <p>Defaults to None.</p> <code>None</code> <code>tbname</code> <code>str</code> <p>Defaults to \"tb\".</p> <code>'tb'</code> <code>use_name</code> <code>str</code> <p>Defaults to \"table\".</p> <code>'table'</code> <code>column_elm_list</code> <code>list</code> <p>Defaults to None.</p> <code>None</code> <code>count</code> <code>int</code> <p>Defaults to 1.</p> <code>1</code> <code>default_tbname_prefix</code> <code>str</code> <p>Defaults to \"tb\".</p> <code>'tb'</code> <code>default_tbname_index_start_num</code> <code>int</code> <p>Defaults to 1.</p> <code>1</code> <code>default_column_index_start_num</code> <code>int</code> <p>Defaults to 1.</p> <code>1</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.sdelete_rows","title":"<code>sdelete_rows(dbname=None, tbname=None, start_ts=None, end_ts=None, ts_key=None)</code>","text":"<p>delete rows</p> <p>Parameters:</p> Name Type Description Default <code>dbname</code> <code>str</code> <p>Defaults to None.</p> <code>None</code> <code>tbname</code> <code>str</code> <p>Defaults to None.</p> <code>None</code> <code>start_ts</code> <code>timestamp</code> <p>range start. Defaults to None.</p> <code>None</code> <code>end_ts</code> <code>timestamp</code> <p>range end. Defaults to None.</p> <code>None</code> <code>ts_key</code> <code>str</code> <p>timestamp column name. Defaults to None.</p> <code>None</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.sgen_column_type_str","title":"<code>sgen_column_type_str(column_elm_list)</code>","text":"<p>generage column type str</p> <p>Parameters:</p> Name Type Description Default <code>column_elm_list</code> <code>list</code> <p>column_elm_list</p> required"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.sgen_column_value_list","title":"<code>sgen_column_value_list(column_elm_list, need_null, ts_value=None, additional_ts=None, custom_col_index=None, col_value_type=None, force_pk_val=None)</code>","text":"<p>summary</p> <p>Parameters:</p> Name Type Description Default <code>column_elm_list</code> <code>list</code> <p>gen_random_type_value()</p> required <code>need_null</code> <code>bool</code> <p>if insert null</p> required <code>ts_value</code> <code>timestamp</code> <p>Defaults to None.</p> <code>None</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.sgen_tag_type_str","title":"<code>sgen_tag_type_str(tag_elm_list)</code>","text":"<p>generage tag type str</p> <p>Parameters:</p> Name Type Description Default <code>tag_elm_list</code> <code>list</code> <p>tag_elm_list</p> required"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.sgen_tag_value_list","title":"<code>sgen_tag_value_list(tag_elm_list, ts_value=None)</code>","text":"<p>generage tag value str</p> <p>Parameters:</p> Name Type Description Default <code>tag_elm_list</code> <code>list</code> <p>description</p> required <code>ts_value</code> <code>timestamp</code> <p>Defaults to None.</p> <code>None</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.sinsert_rows","title":"<code>sinsert_rows(dbname=None, tbname=None, column_ele_list=None, ts_value=None, count=1, need_null=False, custom_col_index=None, col_value_type='random')</code>","text":"<p>insert rows</p> <p>Parameters:</p> Name Type Description Default <code>dbname</code> <code>str</code> <p>Defaults to None.</p> <code>None</code> <code>tbname</code> <code>str</code> <p>Defaults to None.</p> <code>None</code> <code>column_ele_list</code> <code>list</code> <p>Defaults to None.</p> <code>None</code> <code>ts_value</code> <code>timestamp</code> <p>Defaults to None.</p> <code>None</code> <code>count</code> <code>int</code> <p>Defaults to 1.</p> <code>1</code> <code>need_null</code> <code>bool</code> <p>Defaults to False.</p> <code>False</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.str_ts_trans_bigint","title":"<code>str_ts_trans_bigint(str_ts)</code>","text":"<p>trans str ts to bigint</p> <p>Parameters:</p> Name Type Description Default <code>str_ts</code> <code>str</code> <p>human-date</p> required <p>Returns:</p> Name Type Description <code>bigint</code> <p>bigint-ts</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.time_cast","title":"<code>time_cast(time_value, split_symbol='+')</code>","text":"<p>cast bigint to timestamp</p> <p>Parameters:</p> Name Type Description Default <code>time_value</code> <code>bigint</code> <p>ts</p> required <code>split_symbol</code> <code>str</code> <p>split sympol. Defaults to \"+\".</p> <code>'+'</code> <p>Returns:</p> Name Type Description <code>_type_</code> <p>timestamp</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.trans_time_to_s","title":"<code>trans_time_to_s(runtime)</code>","text":"<p>trans time to s</p> <p>Parameters:</p> Name Type Description Default <code>runtime</code> <code>str</code> <p>1d/1h/1m...</p> required <p>Returns:</p> Name Type Description <code>int</code> <p>second</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.update_delete_history_data","title":"<code>update_delete_history_data(delete)</code>","text":"<p>update and delete history data</p> <p>Parameters:</p> Name Type Description Default <code>delete</code> <code>bool</code> <p>True/False</p> required"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDCom.update_json_file_replica","title":"<code>update_json_file_replica(json_file_path, new_replica_value, output_file_path=None)</code>","text":"<p>Read a JSON file, update the 'replica' value, and write the result back to a file.</p> <p>Parameters: json_file_path (str): The path to the original JSON file. new_replica_value (int): The new 'replica' value to be set. output_file_path (str, optional): The path to the output file where the updated JSON will be saved. If not provided, the original file will be overwritten.</p> <p>Returns: None</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql","title":"<code>TDSql</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.checkAffectedRows","title":"<code>checkAffectedRows(expectAffectedRows)</code>","text":"<p>Checks if the number of affected rows from the last executed SQL statement matches the expected number of affected rows.</p> <p>Parameters:</p> Name Type Description Default <code>expectAffectedRows</code> <code>int</code> <p>The expected number of affected rows.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the number of affected rows does not match the expected number.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.checkAgg","title":"<code>checkAgg(sql, expectCnt)</code>","text":"<p>Executes an aggregate SQL query and checks if the result matches the expected count.</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The aggregate SQL query to be executed.</p> required <code>expectCnt</code> <code>int</code> <p>The expected count from the aggregate query.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the query execution fails.</p> <code>SystemExit</code> <p>If the result of the aggregate query does not match the expected count.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.checkColNameList","title":"<code>checkColNameList(col_name_list, expect_col_name_list)</code>","text":"<p>Checks if the column names from the last query match the expected column names.</p> <p>Parameters:</p> Name Type Description Default <code>col_name_list</code> <code>list</code> <p>The list of column names from the last query.</p> required <code>expect_col_name_list</code> <code>list</code> <p>The list of expected column names.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the column names do not match the expected column names.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.checkCols","title":"<code>checkCols(expectCols)</code>","text":"<p>Checks if the number of columns fetched by the last query matches the expected number of columns.</p> <p>Parameters:</p> Name Type Description Default <code>expectCols</code> <code>int</code> <p>The expected number of columns.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the number of columns does not match the expected number.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.checkData","title":"<code>checkData(row, col, data, show=False)</code>","text":"<p>Checks if the data at the specified row and column matches the expected data.</p> <p>Parameters:</p> Name Type Description Default <code>row</code> <code>int</code> <p>The row index of the data to be checked.</p> required <code>col</code> <code>int</code> <p>The column index of the data to be checked.</p> required <code>data</code> <p>The expected data to be compared with.</p> required <code>show</code> <code>bool</code> <p>If True, logs a message when the check is successful. Defaults to False.</p> <code>False</code> <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the data at the specified row and column does not match the expected data.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.checkDataCsv","title":"<code>checkDataCsv(sql, csvfilePath)</code>","text":"<p>Executes a SQL query and checks if the result matches the expected data from a CSV file.(Not used)</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL query to be executed.</p> required <code>csvfilePath</code> <code>str</code> <p>The path to the CSV file containing the expected data.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the CSV file path is invalid, the file is not found, there is an error reading the file, or if the sql result does not match the expected data from CSV file.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.checkDataCsvByLine","title":"<code>checkDataCsvByLine(sql, csvfilePath)</code>","text":"<p>Executes a SQL query and checks if the result matches the expected data from a CSV file line by line.</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL query to be executed.</p> required <code>csvfilePath</code> <code>str</code> <p>The path to the CSV file containing the expected data.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the CSV file path is invalid, the file is not found, there is an error reading the file,         or if the SQL result does not match the expected data from the CSV file.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.checkDataLoop","title":"<code>checkDataLoop(row, col, data, sql, loopCount, waitTime)</code>","text":"<p>Executes a SQL query in a loop and checks if the data at the specified row and column matches the expected data.</p> <p>Parameters:</p> Name Type Description Default <code>row</code> <code>int</code> <p>The row index of the data to be checked.</p> required <code>col</code> <code>int</code> <p>The column index of the data to be checked.</p> required <code>data</code> <p>The expected data to be compared with.</p> required <code>sql</code> <code>str</code> <p>The SQL query to be executed.</p> required <code>loopCount</code> <code>int</code> <p>The number of times to execute the SQL query.</p> required <code>waitTime</code> <code>int</code> <p>The time to wait (in seconds) between each execution.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the query execution fails.</p> <code>SystemExit</code> <p>If the data at the specified row and column does not match the expected data.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.checkDataMem","title":"<code>checkDataMem(sql, mem)</code>","text":"<p>Executes a SQL query and checks if the result matches the expected data.</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL query to be executed.</p> required <code>mem</code> <code>list</code> <p>The expected data, represented as a list of lists.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the expected data is not a list of lists, or if the SQL result does not match the expected data.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.checkDataMemByLine","title":"<code>checkDataMemByLine(sql, mem)</code>","text":"<p>Executes a SQL query and checks if the result matches the expected data (Same as checkDataMem).</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL query to be executed.</p> required <code>mem</code> <code>list</code> <p>The expected data, represented as a list of lists.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the expected data is not a list of lists, or if the SQL result does not match the expected data.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.checkDataNoExist","title":"<code>checkDataNoExist(row, col, data)</code>","text":"<p>Checks if the data at the specified row and column matches the expected data without exiting the program.</p> <p>Parameters:</p> Name Type Description Default <code>row</code> <code>int</code> <p>The row index of the data to be checked.</p> required <code>col</code> <code>int</code> <p>The column index of the data to be checked.</p> required <code>data</code> <p>The expected data to be compared with.</p> required <p>Returns:</p> Name Type Description <code>bool</code> <p>True if the data matches the expected data, otherwise False.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.checkDataType","title":"<code>checkDataType(row, col, dataType)</code>","text":"<p>Checks if the data type at the specified row and column matches the expected data type.</p> <p>Parameters:</p> Name Type Description Default <code>row</code> <code>int</code> <p>The row index of the data to be checked.</p> required <code>col</code> <code>int</code> <p>The column index of the data to be checked.</p> required <code>dataType</code> <code>str</code> <p>The expected data type.</p> required <p>Returns:</p> Name Type Description <code>bool</code> <p>True if the data type matches the expected data type, otherwise False.</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the specified row or column index is out of range.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.checkEqual","title":"<code>checkEqual(elm, expect_elm)</code>","text":"<p>Checks if the given element is equal to the expected element.</p> <p>Parameters:</p> Name Type Description Default <code>elm</code> <p>The element to be checked.</p> required <code>expect_elm</code> <p>The expected element to be compared with.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the element does not match the expected element.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.checkFirstValue","title":"<code>checkFirstValue(sql, expect)</code>","text":"<p>Executes a SQL query and checks if the first value in the result matches the expected value.</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL query to be executed.</p> required <code>expect</code> <p>The expected value of the first result.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the query execution fails.</p> <code>SystemExit</code> <p>If the first value in the result does not match the expected value.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.checkNotEqual","title":"<code>checkNotEqual(elm, expect_elm)</code>","text":"<p>Checks if the given element is not equal to the expected element.</p> <p>Parameters:</p> Name Type Description Default <code>elm</code> <p>The element to be checked.</p> required <code>expect_elm</code> <p>The expected element to be compared with.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the element matches the expected element.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.checkRowCol","title":"<code>checkRowCol(row, col)</code>","text":"<p>Checks if the specified row and column indices are within the range of the last query result.</p> <p>Parameters:</p> Name Type Description Default <code>row</code> <code>int</code> <p>The row index to be checked.</p> required <code>col</code> <code>int</code> <p>The column index to be checked.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the specified row or column index is out of range.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.checkRowColNoExist","title":"<code>checkRowColNoExist(row, col)</code>","text":"<p>Checks if the specified row and column indices are within the range of the last query result without exiting the program.</p> <p>Parameters:</p> Name Type Description Default <code>row</code> <code>int</code> <p>The row index to be checked.</p> required <code>col</code> <code>int</code> <p>The column index to be checked.</p> required <p>Returns:</p> Name Type Description <code>bool</code> <p>True if the specified row and column indices are within the range, otherwise False.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.checkRows","title":"<code>checkRows(expectedRows)</code>","text":"<p>Checks if the number of rows fetched by the last query matches the expected number of rows.</p> <p>Parameters:</p> Name Type Description Default <code>expectRows</code> <code>int</code> <p>The expected number of rows.</p> required <p>Returns:</p> Name Type Description <code>bool</code> <p>True if the number of rows matches the expected number, otherwise it exits the program.</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the number of rows does not match the expected number.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.checkRows_not_exited","title":"<code>checkRows_not_exited(expectedRows)</code>","text":"<p>Check if the query rows is equal to the expected rows :param expectedRows: The expected number of rows. :return: Returns True if the actual number of rows matches the expected number, otherwise returns False.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.checkRows_range","title":"<code>checkRows_range(excepte_row_list)</code>","text":"<p>Checks if the number of rows fetched by the last query is within the expected range.(Not used)</p> <p>Parameters:</p> Name Type Description Default <code>excepte_row_list</code> <code>list</code> <p>A list of expected row counts.</p> required <p>Returns:</p> Name Type Description <code>bool</code> <p>True if the number of rows is within the expected range, otherwise it exits the program.</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the number of rows is not within the expected range.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.checkSameColumn","title":"<code>checkSameColumn(c1, c2)</code>","text":"<p>Checks if the values in two specified columns are the same for all rows in the last query result.</p> <p>Parameters:</p> Name Type Description Default <code>c1</code> <code>int</code> <p>The index of the first column to be checked.</p> required <code>c2</code> <code>int</code> <p>The index of the second column to be checked.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the values in the specified columns are not the same for any row.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.close","title":"<code>close()</code>","text":"<p>Closes the cursor.</p> <p>Returns:</p> Type Description <p>None</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.error","title":"<code>error(sql, expectedErrno=None, expectErrInfo=None, fullMatched=True, show=False)</code>","text":"<p>Executes a SQL statement and checks for expected errors.</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL statement to be executed.</p> required <code>expectedErrno</code> <code>int</code> <p>The expected error number. Defaults to None.</p> <code>None</code> <code>expectErrInfo</code> <code>str</code> <p>The expected error information. Defaults to None.</p> <code>None</code> <p>Returns:</p> Name Type Description <code>str</code> <p>The error information if an error occurs.</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the expected error does not occur or if the error information does not match the expected information.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.errors","title":"<code>errors(sql_list, expected_error_id_list=None, expected_error_info_list=None)</code>","text":"<p>Executes a list of SQL queries and checks for expected errors.</p> <p>Parameters:</p> Name Type Description Default <code>sql_list</code> <code>list</code> <p>The list of SQL queries to be executed.</p> required <code>expected_error_id_list</code> <code>list</code> <p>The list of expected error numbers corresponding to each SQL query. Defaults to None.</p> <code>None</code> <code>expected_error_info_list</code> <code>list</code> <p>The list of expected error information corresponding to each SQL query. Defaults to None.</p> <code>None</code> <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the SQL list is empty, if the execution of any SQL query fails, if the expected error does not occur, or if the error information does not match the expected information.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.execute","title":"<code>execute(sql, queryTimes=10, show=False)</code>","text":"<p>Executes a SQL statement.</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL statement to be executed.</p> required <code>queryTimes</code> <code>int</code> <p>The number of times to attempt the execution in case of failure. Defaults to 10.</p> <code>10</code> <code>show</code> <code>bool</code> <p>If True, the SQL statement will be logged before execution. Defaults to False.</p> <code>False</code> <p>Returns:</p> Name Type Description <code>int</code> <p>The number of affected rows.</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the execution fails after the specified number of attempts.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.executeTimes","title":"<code>executeTimes(sql, times)</code>","text":"<p>Executes a SQL statement a specified number of times.(Not used)</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL statement to be executed.</p> required <code>times</code> <code>int</code> <p>The number of times to execute the SQL statement.</p> required <p>Returns:</p> Name Type Description <code>int</code> <p>The number of affected rows from the last execution.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.executes","title":"<code>executes(sqls, queryTimes=30, show=False)</code>","text":"<p>Executes a list of SQL statements.</p> <p>Parameters:</p> Name Type Description Default <code>sqls</code> <code>list</code> <p>The list of SQL statements to be executed.</p> required <code>queryTimes</code> <code>int</code> <p>The number of times to attempt the execution in case of failure. Defaults to 30.</p> <code>30</code> <code>show</code> <code>bool</code> <p>If True, each SQL statement will be logged before execution. Defaults to False.</p> <code>False</code> <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the execution of any SQL statement fails after the specified number of attempts.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.getColData","title":"<code>getColData(col)</code>","text":"<p>Retrieves all data from the specified column in the last query result.</p> <p>Parameters:</p> Name Type Description Default <code>col</code> <code>int</code> <p>The column index of the data to be retrieved.</p> required <p>Returns:</p> Name Type Description <code>list</code> <p>A list containing all data from the specified column.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.getColNameList","title":"<code>getColNameList(sql, col_tag=None)</code>","text":"<p>Executes a SQL query and retrieves the column names and optionally the column types.</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL query to be executed.</p> required <code>col_tag</code> <code>optional</code> <p>If provided, the method will return both column names and column types. Defaults to None.</p> <code>None</code> <p>Returns:</p> Name Type Description <code>list</code> <p>A list containing the column names.</p> <code>tuple</code> <p>A tuple containing two lists - the column names and the column types, if col_tag is provided.</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the query execution fails.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.getData","title":"<code>getData(row, col)</code>","text":"<p>Retrieves the data at the specified row and column from the last query result.</p> <p>Parameters:</p> Name Type Description Default <code>row</code> <code>int</code> <p>The row index of the data to be retrieved.</p> required <code>col</code> <code>int</code> <p>The column index of the data to be retrieved.</p> required <p>Returns:</p> Type Description <p>The data at the specified row and column.</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the specified row or column is out of range.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.getFirstValue","title":"<code>getFirstValue(sql)</code>","text":"<p>Executes a SQL query and retrieves the first value in the result.</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL query to be executed.</p> required <p>Returns:</p> Type Description <p>The first value in the result.</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the query execution fails.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.getResult","title":"<code>getResult(sql)</code>","text":"<p>Executes a SQL query and fetches the results.</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL query to be executed.</p> required <p>Returns:</p> Name Type Description <code>list</code> <p>The fetched results.</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the query execution fails.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.getRows","title":"<code>getRows()</code>","text":"<p>Retrieves the number of rows fetched by the last query.</p> <p>Returns:</p> Name Type Description <code>int</code> <p>The number of rows fetched by the last query.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.getVariable","title":"<code>getVariable(search_attr)</code>","text":"<p>Retrieves the value of a specified variable from the database.</p> <p>Parameters:</p> Name Type Description Default <code>search_attr</code> <code>str</code> <p>The name of the variable to be retrieved.</p> required <p>Returns:</p> Name Type Description <code>tuple</code> <p>A tuple containing the value of the specified variable and the list of all variables.</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the query execution fails.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.get_times","title":"<code>get_times(time_str, precision='ms')</code>","text":"<p>Converts a time string to a timestamp based on the specified precision.(Not used)</p> <p>Parameters:</p> Name Type Description Default <code>time_str</code> <code>str</code> <p>The time string to be converted. The string should end with a character indicating the time unit (e.g., 's' for seconds, 'm' for minutes).</p> required <code>precision</code> <code>str</code> <p>The precision of the timestamp. Can be \"ms\" (milliseconds), \"us\" (microseconds), or \"ns\" (nanoseconds). Defaults to \"ms\".</p> <code>'ms'</code> <p>Returns:</p> Name Type Description <code>int</code> <p>The timestamp in the specified precision.</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the time string does not end with a valid time unit character or if the precision is not valid.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.get_type","title":"<code>get_type(col)</code>","text":"<p>Retrieves the data type of the specified column in the last query result.(Not used)</p> <p>Parameters:</p> Name Type Description Default <code>col</code> <code>int</code> <p>The column index for which the data type is to be retrieved.</p> required <p>Returns:</p> Name Type Description <code>str</code> <p>The data type of the specified column.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.init","title":"<code>init(cursor, log=False)</code>","text":"<p>Initializes the TDSql instance with a database cursor and optionally enables logging.</p> <p>Parameters:</p> Name Type Description Default <code>cursor</code> <p>The database cursor to be used for executing SQL queries.</p> required <code>log</code> <code>bool</code> <p>If True, enables logging of SQL statements to a file. Defaults to False.</p> <code>False</code> <p>Returns:</p> Type Description <p>None</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.is_err_sql","title":"<code>is_err_sql(sql)</code>","text":"<p>Executes a SQL statement and checks if it results in an error.(Not used)</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL statement to be executed.</p> required <p>Returns:</p> Name Type Description <code>bool</code> <p>True if the SQL statement results in an error, False otherwise.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.prepare","title":"<code>prepare(dbname='db', drop=True, **kwargs)</code>","text":"<p>Prepares the database by optionally dropping it if it exists, creating it, and setting it as the active database.</p> <p>Parameters:</p> Name Type Description Default <code>dbname</code> <code>str</code> <p>The name of the database to be prepared. Defaults to \"db\".</p> <code>'db'</code> <code>drop</code> <code>bool</code> <p>If True, drops the database if it exists before creating it. Defaults to True.</p> <code>True</code> <code>**kwargs</code> <p>Additional keyword arguments to be included in the database creation statement. If duration is not provided, it defaults to 100.</p> <code>{}</code> <p>Returns:</p> Type Description <p>None</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.query","title":"<code>query(sql, row_tag=None, queryTimes=10, count_expected_res=None, show=False)</code>","text":"<p>Executes a SQL query and fetches the results.</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL query to be executed.</p> required <code>row_tag</code> <code>optional</code> <p>If provided, the method will return the fetched results. Defaults to None.</p> <code>None</code> <code>queryTimes</code> <code>int</code> <p>The number of times to attempt the query in case of failure. Defaults to 10.</p> <code>10</code> <code>count_expected_res</code> <code>optional</code> <p>If provided, the method will repeatedly execute the query until the first result matches this value or the queryTimes limit is reached. Defaults to None.</p> <code>None</code> <code>show</code> <code>bool</code> <p>If True, the SQL statement will be logged before execution. Defaults to False.</p> <code>False</code> <p>Returns:</p> Name Type Description <code>int</code> <p>The number of rows fetched if row_tag is not provided.</p> <code>list</code> <p>The fetched results if row_tag is provided.</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the query fails after the specified number of attempts.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.queryAndCheckResult","title":"<code>queryAndCheckResult(sql_list, expect_result_list)</code>","text":"<p>Executes a list of SQL queries and checks the results against the expected results.</p> <p>Parameters:</p> Name Type Description Default <code>sql_list</code> <code>list</code> <p>The list of SQL queries to be executed.</p> required <code>expect_result_list</code> <code>list</code> <p>The list of expected results corresponding to each SQL query.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the execution of any SQL query fails or if the results do not match the expected results.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TDSql.waitedQuery","title":"<code>waitedQuery(sql, expectedRows, timeout)</code>","text":"<p>Executes a SQL query and waits until the expected number of rows is retrieved or the timeout is reached.</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL query to be executed.</p> required <code>expectedRows</code> <code>int</code> <p>The expected number of rows to be retrieved.</p> required <code>timeout</code> <code>int</code> <p>The maximum time to wait (in seconds) for the expected number of rows to be retrieved.</p> required <p>Returns:</p> Name Type Description <code>tuple</code> <p>A tuple containing the number of rows retrieved and the time taken (in seconds).</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the query execution fails.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TaosKeeper","title":"<code>TaosKeeper</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TaosKeeper.cfg","title":"<code>cfg(option, value)</code>","text":"<p>add param option and value to cfg file</p> <p>Parameters:</p> Name Type Description Default <code>option</code> <p>str, param name</p> required <code>value</code> <p>str, param value</p> required <p>Returns:</p> Type Description <p>None</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TaosKeeper.start","title":"<code>start()</code>","text":"<p>start taoskeeper process.</p> <p>Returns:</p> Type Description <p>None</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TaosKeeper.stop","title":"<code>stop(force_kill=False)</code>","text":"<p>stop taoskeeper process.</p> <p>Parameters:</p> Name Type Description Default <code>force_kill</code> <p>bool, whether to force kill the process default: False if True, use kill -9 if False, use kill -15</p> <code>False</code> <p>Returns:</p> Type Description <p>None</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.TaosKeeper.update_cfg","title":"<code>update_cfg(update_dict)</code>","text":"<p>update taoskeeper cfg file</p> <p>Parameters:</p> Name Type Description Default <code>update_dict</code> <code>dict</code> <p>dict, update dict example: {\"log\": {\"path\": \"/var/log/taos\"}}</p> required <p>Returns:</p> Type Description <p>None</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.srvCtl","title":"<code>srvCtl</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.srvCtl.clusterRootPath","title":"<code>clusterRootPath()</code>","text":"<p>Gets the root path of the cluster.</p> <p>Returns:</p> Name Type Description <code>str</code> <p>The root path of the cluster.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.srvCtl.dnodeCfgPath","title":"<code>dnodeCfgPath(idx)</code>","text":"<p>Gets the configuration path for a specific dnode.</p> <p>Parameters:</p> Name Type Description Default <code>idx</code> <code>int</code> <p>The index of the dnode.</p> required <p>Returns:</p> Name Type Description <code>str</code> <p>The configuration path for the dnode.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.srvCtl.dnodeDataFiles","title":"<code>dnodeDataFiles(idx)</code>","text":"<p>Gets the data files for a specific dnode.</p> <p>Parameters:</p> Name Type Description Default <code>idx</code> <code>int</code> <p>The index of the dnode.</p> required <p>Returns:</p> Name Type Description <code>list</code> <p>A list of data files for the dnode.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.srvCtl.dnodeStart","title":"<code>dnodeStart(idx)</code>","text":"<p>Starts a dnode.</p> <p>Parameters:</p> Name Type Description Default <code>idx</code> <code>int</code> <p>The index of the dnode to start.</p> required <p>Returns:</p> Name Type Description <code>bool</code> <p>True if the dnode was started successfully, False otherwise.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.srvCtl.dnodeStop","title":"<code>dnodeStop(idx)</code>","text":"<p>Stops a dnode.</p> <p>Parameters:</p> Name Type Description Default <code>idx</code> <code>int</code> <p>The index of the dnode to stop.</p> required <p>Returns:</p> Name Type Description <code>bool</code> <p>True if the dnode was stopped successfully, False otherwise.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.srvCtl.dnodeStopAll","title":"<code>dnodeStopAll()</code>","text":"<p>Stops all dnodes.</p> <p>Returns:</p> Name Type Description <code>bool</code> <p>True if all dnodes were stopped successfully, False otherwise.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#__init__.srvCtl.taosdFile","title":"<code>taosdFile(idx)</code>","text":"<p>Gets the path to the taosd file for a specific dnode.</p> <p>Parameters:</p> Name Type Description Default <code>idx</code> <code>int</code> <p>The index of the dnode.</p> required <p>Returns:</p> Name Type Description <code>str</code> <p>The path to the taosd file.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#before_test","title":"<code>before_test</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#before_test.BeforeTest","title":"<code>BeforeTest</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#before_test.BeforeTest.create_database","title":"<code>create_database(request, db_name, host, port)</code>","text":"<p>\u521b\u5efamodule\u7ea7\u522b\u7684\u6570\u636e\u5e93</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#before_test.BeforeTest.deploy_taos","title":"<code>deploy_taos(yaml_file, mnodes_num=1)</code>","text":"<p>get env directory from request; use yaml file for tostest run;</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#boundary","title":"<code>boundary</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#clusterCommonCheck","title":"<code>clusterCommonCheck</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#clusterCommonCheck.ClusterComCheck","title":"<code>ClusterComCheck</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#clusterCommonCheck.ClusterComCheck.check_vgroups_status","title":"<code>check_vgroups_status(vgroup_numbers=2, db_replica=3, count_number=10, db_name='db')</code>","text":"<p>check vgroups status in 10s after db vgroups status is changed</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#clusterCommonCheck.ClusterComCheck.check_vgroups_status_with_offline","title":"<code>check_vgroups_status_with_offline(vgroup_numbers=2, db_replica=3, count_number=10, db_name='db')</code>","text":"<p>n nodes cluster, 3 replica database return 1, n leaders, stable status return 2, 0 &lt; num of leader &lt; n, stable status return 0, no leader, stable status return -1, Elections not yet completed, unstable status</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#common","title":"<code>common</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom","title":"<code>TDCom</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.cal_watermark_window_close_interval_endts","title":"<code>cal_watermark_window_close_interval_endts(start_ts, interval, watermark=None)</code>","text":"<p>cal endts for close window</p> <p>Parameters:</p> Name Type Description Default <code>start_ts</code> <code>epoch time</code> <p>self.date_time</p> required <code>interval</code> <code>int</code> <p>[s]</p> required <code>watermark</code> <code>int</code> <p>[s]. Defaults to None.</p> <code>None</code> <p>Returns:</p> Name Type Description <code>_type_</code> <p>description</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.cal_watermark_window_close_session_endts","title":"<code>cal_watermark_window_close_session_endts(start_ts, watermark=None, session=None)</code>","text":"<p>cal endts for close window</p> <p>Parameters:</p> Name Type Description Default <code>start_ts</code> <code>epoch time</code> <p>self.date_time</p> required <code>watermark</code> <code>int</code> <p>session. Defaults to None.</p> <code>None</code> <code>session</code> <code>int</code> <p>Defaults to None.</p> <code>None</code> <p>Returns:</p> Name Type Description <code>int</code> <p>as followed</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.cast_query_data","title":"<code>cast_query_data(query_data)</code>","text":"<p>cast query-result for existed-stb</p> <p>Parameters:</p> Name Type Description Default <code>query_data</code> <code>list</code> <p>query data list</p> required <p>Returns:</p> Name Type Description <code>list</code> <p>new list after cast</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.check_query_data","title":"<code>check_query_data(sql1, sql2, sorted=False, fill_value=None, tag_value_list=None, defined_tag_count=None, partition=True, use_exist_stb=False, subtable=None, reverse_check=False)</code>","text":"<p>confirm query result</p> <p>Parameters:</p> Name Type Description Default <code>sql1</code> <code>str</code> <p>select ....</p> required <code>sql2</code> <code>str</code> <p>select ....</p> required <code>sorted</code> <code>bool</code> <p>if sort result list. Defaults to False.</p> <code>False</code> <code>fill_value</code> <code>str</code> <p>fill. Defaults to None.</p> <code>None</code> <code>tag_value_list</code> <code>list</code> <p>Defaults to None.</p> <code>None</code> <code>defined_tag_count</code> <code>int</code> <p>Defaults to None.</p> <code>None</code> <code>partition</code> <code>bool</code> <p>Defaults to True.</p> <code>True</code> <code>use_exist_stb</code> <code>bool</code> <p>Defaults to False.</p> <code>False</code> <code>subtable</code> <code>str</code> <p>Defaults to None.</p> <code>None</code> <code>reverse_check</code> <code>bool</code> <p>not equal. Defaults to False.</p> <code>False</code> <p>Returns:</p> Name Type Description <code>bool</code> <p>False if failed</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.check_stream","title":"<code>check_stream(sql1, sql2, expected_count, max_delay=None)</code>","text":"<p>confirm stream</p> <p>Parameters:</p> Name Type Description Default <code>sql1</code> <code>str</code> <p>select ...</p> required <code>sql2</code> <code>str</code> <p>select ...</p> required <code>expected_count</code> <code>int</code> <p>expected_count</p> required <code>max_delay</code> <code>int</code> <p>max_delay value. Defaults to None.</p> <code>None</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.check_stream_field_type","title":"<code>check_stream_field_type(sql, input_function)</code>","text":"<p>confirm stream field</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>input sql</p> required <code>input_function</code> <code>str</code> <p>scalar</p> required"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.check_stream_res","title":"<code>check_stream_res(sql, expected_res, max_delay)</code>","text":"<p>confirm stream result</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>select ...</p> required <code>expected_res</code> <code>str</code> <p>expected result</p> required <code>max_delay</code> <code>int</code> <p>max_delay value</p> required <p>Returns:</p> Name Type Description <code>bool</code> <p>False if failed</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.check_stream_task_status","title":"<code>check_stream_task_status(stream_name, vgroups, stream_timeout=0, check_wal_info=True)</code>","text":"<p>check stream status</p> <p>Parameters:</p> Name Type Description Default <code>stream_name</code> <code>str</code> <p>stream_name</p> required <code>vgroups</code> <code>int</code> <p>vgroups</p> required <p>Returns:     str: status</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.cleanTb","title":"<code>cleanTb(type='taosc', dbname='db')</code>","text":"<p>type is taosc or restful</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.clean_env","title":"<code>clean_env()</code>","text":"<p>drop all streams and databases</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.create_stream","title":"<code>create_stream(stream_name, des_table, source_sql, trigger_mode=None, watermark=None, max_delay=None, ignore_expired=None, ignore_update=None, subtable_value=None, fill_value=None, fill_history_value=None, stb_field_name_value=None, tag_value=None, use_exist_stb=False, use_except=False)</code>","text":"<p>create_stream</p> <p>Parameters:</p> Name Type Description Default <code>stream_name</code> <code>str</code> <p>stream_name</p> required <code>des_table</code> <code>str</code> <p>target stable</p> required <code>source_sql</code> <code>str</code> <p>stream sql</p> required <code>trigger_mode</code> <code>str</code> <p>at_once/window_close/max_delay. Defaults to None.</p> <code>None</code> <code>watermark</code> <code>str</code> <p>watermark time. Defaults to None.</p> <code>None</code> <code>max_delay</code> <code>str</code> <p>max_delay time. Defaults to None.</p> <code>None</code> <code>ignore_expired</code> <code>int</code> <p>ignore expired data. Defaults to None.</p> <code>None</code> <code>ignore_update</code> <code>int</code> <p>ignore update data. Defaults to None.</p> <code>None</code> <code>subtable_value</code> <code>str</code> <p>subtable. Defaults to None.</p> <code>None</code> <code>fill_value</code> <code>str</code> <p>fill. Defaults to None.</p> <code>None</code> <code>fill_history_value</code> <code>int</code> <p>0/1. Defaults to None.</p> <code>None</code> <code>stb_field_name_value</code> <code>str</code> <p>existed stb. Defaults to None.</p> <code>None</code> <code>tag_value</code> <code>str</code> <p>custom tag. Defaults to None.</p> <code>None</code> <code>use_exist_stb</code> <code>bool</code> <p>use existed stb tag. Defaults to False.</p> <code>False</code> <code>use_except</code> <code>bool</code> <p>Exception tag. Defaults to False.</p> <code>False</code> <p>Returns:</p> Name Type Description <code>str</code> <p>stream</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.drop_all_db","title":"<code>drop_all_db()</code>","text":"<p>drop all databases</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.drop_all_streams","title":"<code>drop_all_streams()</code>","text":"<p>drop all streams</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.drop_db","title":"<code>drop_db(dbname='test')</code>","text":"<p>drop a db</p> <p>Parameters:</p> Name Type Description Default <code>dbname</code> <code>str</code> <p>Defaults to \"test\".</p> <code>'test'</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.float_handle","title":"<code>float_handle(input_list)</code>","text":"<p>float list elem</p> <p>Parameters:</p> Name Type Description Default <code>input_list</code> <code>list</code> <p>input value list</p> required <p>Returns:</p> Name Type Description <code>_type_</code> <p>float list</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.genTs","title":"<code>genTs(precision='ms', ts='', protype='taosc', ns_tag=None)</code>","text":"<p>generate ts</p> <p>Parameters:</p> Name Type Description Default <code>precision</code> <code>str</code> <p>db precision. Defaults to \"ms\".</p> <code>'ms'</code> <code>ts</code> <code>str</code> <p>input ts. Defaults to \"\".</p> <code>''</code> <code>protype</code> <code>str</code> <p>\"taosc\" or \"restful\". Defaults to \"taosc\".</p> <code>'taosc'</code> <code>ns_tag</code> <code>_type_</code> <p>use ns. Defaults to None.</p> <code>None</code> <p>Returns:</p> Type Description <p>timestamp, datetime: timestamp and datetime</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.gen_tag_col_str","title":"<code>gen_tag_col_str(gen_type, data_type, count)</code>","text":"<p>gen multi tags or cols by gen_type</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.getLongName","title":"<code>getLongName(len, mode='mixed')</code>","text":"<p>generate long name mode could be numbers/letters/letters_mixed/mixed</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.get_long_name","title":"<code>get_long_name(length=10, mode='letters')</code>","text":"<p>generate long name mode could be numbers/letters/letters_mixed/mixed</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.get_timestamp_n_days_later","title":"<code>get_timestamp_n_days_later(n=30)</code>","text":"<p>Get the timestamp of a date n days later from the current date.</p> <p>Parameters:</p> Name Type Description Default <code>n</code> <code>int</code> <p>Number of days to add to the current date. Default is 30.</p> <code>30</code> <p>Returns:</p> Name Type Description <code>int</code> <p>Timestamp of the date n days later, in milliseconds.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.pause_stream","title":"<code>pause_stream(stream_name, if_exist=True, if_not_exist=False)</code>","text":"<p>pause_stream</p> <p>Parameters:</p> Name Type Description Default <code>stream_name</code> <code>str</code> <p>stream_name</p> required <code>if_exist</code> <code>bool</code> <p>Defaults to True.</p> <code>True</code> <code>if_not_exist</code> <code>bool</code> <p>Defaults to False.</p> <code>False</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.prepare_data","title":"<code>prepare_data(interval=None, watermark=None, session=None, state_window=None, state_window_max=127, interation=3, range_count=None, precision='ms', fill_history_value=0, ext_stb=None, custom_col_index=None, col_value_type='random')</code>","text":"<p>prepare stream data</p> <p>Parameters:</p> Name Type Description Default <code>interval</code> <code>int</code> <p>Defaults to None.</p> <code>None</code> <code>watermark</code> <code>int</code> <p>Defaults to None.</p> <code>None</code> <code>session</code> <code>int</code> <p>Defaults to None.</p> <code>None</code> <code>state_window</code> <code>str</code> <p>Defaults to None.</p> <code>None</code> <code>state_window_max</code> <code>int</code> <p>Defaults to 127.</p> <code>127</code> <code>interation</code> <code>int</code> <p>Defaults to 3.</p> <code>3</code> <code>range_count</code> <code>int</code> <p>Defaults to None.</p> <code>None</code> <code>precision</code> <code>str</code> <p>Defaults to \"ms\".</p> <code>'ms'</code> <code>fill_history_value</code> <code>int</code> <p>Defaults to 0.</p> <code>0</code> <code>ext_stb</code> <code>bool</code> <p>Defaults to None.</p> <code>None</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.resume_stream","title":"<code>resume_stream(stream_name, if_exist=True, if_not_exist=False, ignore_untreated=False)</code>","text":"<p>resume_stream</p> <p>Parameters:</p> Name Type Description Default <code>stream_name</code> <code>str</code> <p>stream_name</p> required <code>if_exist</code> <code>bool</code> <p>Defaults to True.</p> <code>True</code> <code>if_not_exist</code> <code>bool</code> <p>Defaults to False.</p> <code>False</code> <code>ignore_untreated</code> <code>bool</code> <p>Defaults to False.</p> <code>False</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.round_handle","title":"<code>round_handle(input_list)</code>","text":"<p>round list elem</p> <p>Parameters:</p> Name Type Description Default <code>input_list</code> <code>list</code> <p>input value list</p> required <p>Returns:</p> Name Type Description <code>_type_</code> <p>round list</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.screateDb","title":"<code>screateDb(dbname='test', drop_db=True, **kwargs)</code>","text":"<p>create database</p> <p>Parameters:</p> Name Type Description Default <code>dbname</code> <code>str</code> <p>Defaults to \"test\".</p> <code>'test'</code> <code>drop_db</code> <code>bool</code> <p>Defaults to True.</p> <code>True</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.screate_ctable","title":"<code>screate_ctable(dbname=None, stbname=None, ctbname='ctb', use_name='table', tag_elm_list=None, ts_value=None, count=1, default_varchar_datatype='letters', default_nchar_datatype='letters', default_ctbname_prefix='ctb', default_ctbname_index_start_num=1, **kwargs)</code>","text":"<p>summary</p> <p>Parameters:</p> Name Type Description Default <code>dbname</code> <code>str</code> <p>Defaults to None.</p> <code>None</code> <code>stbname</code> <code>str</code> <p>Defaults to None.</p> <code>None</code> <code>ctbname</code> <code>str</code> <p>Defaults to \"ctb\".</p> <code>'ctb'</code> <code>use_name</code> <code>str</code> <p>Defaults to \"table\".</p> <code>'table'</code> <code>tag_elm_list</code> <code>list</code> <p>use for sgen_tag_type_str(), Defaults to None.</p> <code>None</code> <code>ts_value</code> <code>timestamp</code> <p>Defaults to None.</p> <code>None</code> <code>count</code> <code>int</code> <p>ctb count, Defaults to 1.</p> <code>1</code> <code>default_varchar_datatype</code> <code>str</code> <p>Defaults to \"letters\".</p> <code>'letters'</code> <code>default_nchar_datatype</code> <code>str</code> <p>Defaults to \"letters\".</p> <code>'letters'</code> <code>default_ctbname_prefix</code> <code>str</code> <p>Defaults to \"ctb\".</p> <code>'ctb'</code> <code>default_ctbname_index_start_num</code> <code>int</code> <p>Defaults to 1.</p> <code>1</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.screate_stable","title":"<code>screate_stable(dbname=None, stbname='stb', use_name='table', column_elm_list=None, tag_elm_list=None, need_tagts=False, count=1, default_stbname_prefix='stb', default_stbname_index_start_num=1, default_column_index_start_num=1, default_tag_index_start_num=1, **kwargs)</code>","text":"<p>summary</p> <p>Parameters:</p> Name Type Description Default <code>dbname</code> <code>str</code> <p>Defaults to None.</p> <code>None</code> <code>stbname</code> <code>str</code> <p>Defaults to \"stb\".</p> <code>'stb'</code> <code>use_name</code> <code>str</code> <p>stable/table, Defaults to \"table\".</p> <code>'table'</code> <code>column_elm_list</code> <code>list</code> <p>use for sgen_column_type_str(), Defaults to None.</p> <code>None</code> <code>tag_elm_list</code> <code>list</code> <p>use for sgen_tag_type_str(), Defaults to None.</p> <code>None</code> <code>need_tagts</code> <code>bool</code> <p>tag use timestamp, Defaults to False.</p> <code>False</code> <code>count</code> <code>int</code> <p>stable count, Defaults to 1.</p> <code>1</code> <code>default_stbname_prefix</code> <code>str</code> <p>Defaults to \"stb\".</p> <code>'stb'</code> <code>default_stbname_index_start_num</code> <code>int</code> <p>Defaults to 1.</p> <code>1</code> <code>default_column_index_start_num</code> <code>int</code> <p>Defaults to 1.</p> <code>1</code> <code>default_tag_index_start_num</code> <code>int</code> <p>Defaults to 1.</p> <code>1</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.screate_table","title":"<code>screate_table(dbname=None, tbname='tb', use_name='table', column_elm_list=None, count=1, default_tbname_prefix='tb', default_tbname_index_start_num=1, default_column_index_start_num=1, **kwargs)</code>","text":"<p>create ctable</p> <p>Parameters:</p> Name Type Description Default <code>dbname</code> <code>str</code> <p>Defaults to None.</p> <code>None</code> <code>tbname</code> <code>str</code> <p>Defaults to \"tb\".</p> <code>'tb'</code> <code>use_name</code> <code>str</code> <p>Defaults to \"table\".</p> <code>'table'</code> <code>column_elm_list</code> <code>list</code> <p>Defaults to None.</p> <code>None</code> <code>count</code> <code>int</code> <p>Defaults to 1.</p> <code>1</code> <code>default_tbname_prefix</code> <code>str</code> <p>Defaults to \"tb\".</p> <code>'tb'</code> <code>default_tbname_index_start_num</code> <code>int</code> <p>Defaults to 1.</p> <code>1</code> <code>default_column_index_start_num</code> <code>int</code> <p>Defaults to 1.</p> <code>1</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.sdelete_rows","title":"<code>sdelete_rows(dbname=None, tbname=None, start_ts=None, end_ts=None, ts_key=None)</code>","text":"<p>delete rows</p> <p>Parameters:</p> Name Type Description Default <code>dbname</code> <code>str</code> <p>Defaults to None.</p> <code>None</code> <code>tbname</code> <code>str</code> <p>Defaults to None.</p> <code>None</code> <code>start_ts</code> <code>timestamp</code> <p>range start. Defaults to None.</p> <code>None</code> <code>end_ts</code> <code>timestamp</code> <p>range end. Defaults to None.</p> <code>None</code> <code>ts_key</code> <code>str</code> <p>timestamp column name. Defaults to None.</p> <code>None</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.sgen_column_type_str","title":"<code>sgen_column_type_str(column_elm_list)</code>","text":"<p>generage column type str</p> <p>Parameters:</p> Name Type Description Default <code>column_elm_list</code> <code>list</code> <p>column_elm_list</p> required"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.sgen_column_value_list","title":"<code>sgen_column_value_list(column_elm_list, need_null, ts_value=None, additional_ts=None, custom_col_index=None, col_value_type=None, force_pk_val=None)</code>","text":"<p>summary</p> <p>Parameters:</p> Name Type Description Default <code>column_elm_list</code> <code>list</code> <p>gen_random_type_value()</p> required <code>need_null</code> <code>bool</code> <p>if insert null</p> required <code>ts_value</code> <code>timestamp</code> <p>Defaults to None.</p> <code>None</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.sgen_tag_type_str","title":"<code>sgen_tag_type_str(tag_elm_list)</code>","text":"<p>generage tag type str</p> <p>Parameters:</p> Name Type Description Default <code>tag_elm_list</code> <code>list</code> <p>tag_elm_list</p> required"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.sgen_tag_value_list","title":"<code>sgen_tag_value_list(tag_elm_list, ts_value=None)</code>","text":"<p>generage tag value str</p> <p>Parameters:</p> Name Type Description Default <code>tag_elm_list</code> <code>list</code> <p>description</p> required <code>ts_value</code> <code>timestamp</code> <p>Defaults to None.</p> <code>None</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.sinsert_rows","title":"<code>sinsert_rows(dbname=None, tbname=None, column_ele_list=None, ts_value=None, count=1, need_null=False, custom_col_index=None, col_value_type='random')</code>","text":"<p>insert rows</p> <p>Parameters:</p> Name Type Description Default <code>dbname</code> <code>str</code> <p>Defaults to None.</p> <code>None</code> <code>tbname</code> <code>str</code> <p>Defaults to None.</p> <code>None</code> <code>column_ele_list</code> <code>list</code> <p>Defaults to None.</p> <code>None</code> <code>ts_value</code> <code>timestamp</code> <p>Defaults to None.</p> <code>None</code> <code>count</code> <code>int</code> <p>Defaults to 1.</p> <code>1</code> <code>need_null</code> <code>bool</code> <p>Defaults to False.</p> <code>False</code>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.str_ts_trans_bigint","title":"<code>str_ts_trans_bigint(str_ts)</code>","text":"<p>trans str ts to bigint</p> <p>Parameters:</p> Name Type Description Default <code>str_ts</code> <code>str</code> <p>human-date</p> required <p>Returns:</p> Name Type Description <code>bigint</code> <p>bigint-ts</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.time_cast","title":"<code>time_cast(time_value, split_symbol='+')</code>","text":"<p>cast bigint to timestamp</p> <p>Parameters:</p> Name Type Description Default <code>time_value</code> <code>bigint</code> <p>ts</p> required <code>split_symbol</code> <code>str</code> <p>split sympol. Defaults to \"+\".</p> <code>'+'</code> <p>Returns:</p> Name Type Description <code>_type_</code> <p>timestamp</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.trans_time_to_s","title":"<code>trans_time_to_s(runtime)</code>","text":"<p>trans time to s</p> <p>Parameters:</p> Name Type Description Default <code>runtime</code> <code>str</code> <p>1d/1h/1m...</p> required <p>Returns:</p> Name Type Description <code>int</code> <p>second</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.update_delete_history_data","title":"<code>update_delete_history_data(delete)</code>","text":"<p>update and delete history data</p> <p>Parameters:</p> Name Type Description Default <code>delete</code> <code>bool</code> <p>True/False</p> required"},{"location":"util_funcs_docs/new_test_framework/utils/#common.TDCom.update_json_file_replica","title":"<code>update_json_file_replica(json_file_path, new_replica_value, output_file_path=None)</code>","text":"<p>Read a JSON file, update the 'replica' value, and write the result back to a file.</p> <p>Parameters: json_file_path (str): The path to the original JSON file. new_replica_value (int): The new 'replica' value to be set. output_file_path (str, optional): The path to the output file where the updated JSON will be saved. If not provided, the original file will be overwritten.</p> <p>Returns: None</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#constant","title":"<code>constant</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#eos","title":"<code>eos</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#epath","title":"<code>epath</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#etime","title":"<code>etime</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#etool","title":"<code>etool</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#etool.benchMark","title":"<code>benchMark(command='', json='')</code>","text":"<p>Run the <code>taosBenchmark</code> binary with a command or JSON file.</p> <p>Parameters:</p> Name Type Description Default <code>command</code> <code>str</code> <p>The command to execute. Defaults to an empty string.</p> <code>''</code> <code>json</code> <code>str</code> <p>The path to a JSON file for execution. Defaults to an empty string.</p> <code>''</code> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the execution of the JSON file fails.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#etool.benchMarkFile","title":"<code>benchMarkFile()</code>","text":"<p>Get the path to the <code>taosBenchmark</code> binary file.</p> <p>Returns:</p> Name Type Description <code>str</code> <p>The full path to the <code>taosBenchmark</code> binary file, with <code>.exe</code> appended if on Windows.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#etool.curFile","title":"<code>curFile(fullPath, filename)</code>","text":"<p>Get the full path to a file in the current directory.</p> <p>Parameters:</p> Name Type Description Default <code>fullPath</code> <code>str</code> <p>The full path to the current directory.</p> required <code>filename</code> <code>str</code> <p>The name of the file.</p> required <p>Returns:</p> Name Type Description <code>str</code> <p>The full path to the file in the current directory.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#etool.exeBinFile","title":"<code>exeBinFile(fname, command, wait=True, show=True)</code>","text":"<p>Execute a binary file with the specified command.</p> <p>This method uses <code>utils.army.frame.eos.exe</code> or <code>utils.army.frame.eos.exeNoWait</code>  to execute the binary file. The <code>exe</code> function waits for the command to finish,  while <code>exeNoWait</code> runs the command in the background and returns immediately.</p> <p>Parameters:</p> Name Type Description Default <code>fname</code> <code>str</code> <p>The name of the binary file.</p> required <code>command</code> <code>str</code> <p>The command to execute.</p> required <code>wait</code> <code>bool</code> <p>Whether to wait for the command to finish. Defaults to True. - If True, uses <code>utils.army.frame.eos.exe</code>. - If False, uses <code>utils.army.frame.eos.exeNoWait</code>.</p> <code>True</code> <code>show</code> <code>bool</code> <p>Whether to log the command. Defaults to True.</p> <code>True</code> <p>Returns:</p> Name Type Description <code>int</code> <p>The exit status of the command execution. A return value of <code>0</code> indicates success,   while a non-zero value indicates failure.  - If <code>wait</code> is False, the return value is the exit status of the <code>nohup</code> or <code>mintty</code> command.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#etool.runBinFile","title":"<code>runBinFile(fname, command, show=True)</code>","text":"<p>Run a binary file with the specified command.</p> <p>Parameters:</p> Name Type Description Default <code>fname</code> <code>str</code> <p>The name of the binary file.</p> required <code>command</code> <code>str</code> <p>The command to execute.</p> required <code>show</code> <code>bool</code> <p>Whether to log the command. Defaults to True.</p> <code>True</code> <p>Returns:</p> Name Type Description <code>list</code> <p>The output of the command as a list of strings.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#etool.taosAdapterFile","title":"<code>taosAdapterFile()</code>","text":"<p>Get the path to the <code>taosAdapter</code> binary file.</p> <p>Returns:</p> Name Type Description <code>str</code> <p>The full path to the <code>taosAdapter</code> binary file, with <code>.exe</code> appended if on Windows.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#etool.taosDumpFile","title":"<code>taosDumpFile()</code>","text":"<p>Get the path to the <code>taosdump</code> binary file.</p> <p>Returns:</p> Name Type Description <code>str</code> <p>The full path to the <code>taosdump</code> binary file, with <code>.exe</code> appended if on Windows.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#eutil","title":"<code>eutil</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#gettime","title":"<code>gettime</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#log","title":"<code>log</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#pathFinding","title":"<code>pathFinding</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#pathFinding.TDFindPath","title":"<code>TDFindPath</code>","text":"<p>This class is for finding path within TDengine</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#pathFinding.TDFindPath.getTDenginePath","title":"<code>getTDenginePath()</code>","text":"<p>for finding the root path of TDengine</p> <p>Returns:</p> Name Type Description <code>str</code> <p>the root path of TDengine</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#pathFinding.TDFindPath.getTaosdemoPath","title":"<code>getTaosdemoPath()</code>","text":"<p>for finding the path of directory containing taosdemo</p> <p>Returns:</p> Name Type Description <code>str</code> <p>the path to directory containing taosdemo</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#pathFinding.TDFindPath.init","title":"<code>init(file)</code>","text":"<p>[summary]</p> <p>Parameters:</p> Name Type Description Default <code>file</code> <code>str</code> <p>the file location you want to start the query. Generally using file</p> required"},{"location":"util_funcs_docs/new_test_framework/utils/#sql","title":"<code>sql</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql","title":"<code>TDSql</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.checkAffectedRows","title":"<code>checkAffectedRows(expectAffectedRows)</code>","text":"<p>Checks if the number of affected rows from the last executed SQL statement matches the expected number of affected rows.</p> <p>Parameters:</p> Name Type Description Default <code>expectAffectedRows</code> <code>int</code> <p>The expected number of affected rows.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the number of affected rows does not match the expected number.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.checkAgg","title":"<code>checkAgg(sql, expectCnt)</code>","text":"<p>Executes an aggregate SQL query and checks if the result matches the expected count.</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The aggregate SQL query to be executed.</p> required <code>expectCnt</code> <code>int</code> <p>The expected count from the aggregate query.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the query execution fails.</p> <code>SystemExit</code> <p>If the result of the aggregate query does not match the expected count.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.checkColNameList","title":"<code>checkColNameList(col_name_list, expect_col_name_list)</code>","text":"<p>Checks if the column names from the last query match the expected column names.</p> <p>Parameters:</p> Name Type Description Default <code>col_name_list</code> <code>list</code> <p>The list of column names from the last query.</p> required <code>expect_col_name_list</code> <code>list</code> <p>The list of expected column names.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the column names do not match the expected column names.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.checkCols","title":"<code>checkCols(expectCols)</code>","text":"<p>Checks if the number of columns fetched by the last query matches the expected number of columns.</p> <p>Parameters:</p> Name Type Description Default <code>expectCols</code> <code>int</code> <p>The expected number of columns.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the number of columns does not match the expected number.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.checkData","title":"<code>checkData(row, col, data, show=False)</code>","text":"<p>Checks if the data at the specified row and column matches the expected data.</p> <p>Parameters:</p> Name Type Description Default <code>row</code> <code>int</code> <p>The row index of the data to be checked.</p> required <code>col</code> <code>int</code> <p>The column index of the data to be checked.</p> required <code>data</code> <p>The expected data to be compared with.</p> required <code>show</code> <code>bool</code> <p>If True, logs a message when the check is successful. Defaults to False.</p> <code>False</code> <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the data at the specified row and column does not match the expected data.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.checkDataCsv","title":"<code>checkDataCsv(sql, csvfilePath)</code>","text":"<p>Executes a SQL query and checks if the result matches the expected data from a CSV file.(Not used)</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL query to be executed.</p> required <code>csvfilePath</code> <code>str</code> <p>The path to the CSV file containing the expected data.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the CSV file path is invalid, the file is not found, there is an error reading the file, or if the sql result does not match the expected data from CSV file.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.checkDataCsvByLine","title":"<code>checkDataCsvByLine(sql, csvfilePath)</code>","text":"<p>Executes a SQL query and checks if the result matches the expected data from a CSV file line by line.</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL query to be executed.</p> required <code>csvfilePath</code> <code>str</code> <p>The path to the CSV file containing the expected data.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the CSV file path is invalid, the file is not found, there is an error reading the file,         or if the SQL result does not match the expected data from the CSV file.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.checkDataLoop","title":"<code>checkDataLoop(row, col, data, sql, loopCount, waitTime)</code>","text":"<p>Executes a SQL query in a loop and checks if the data at the specified row and column matches the expected data.</p> <p>Parameters:</p> Name Type Description Default <code>row</code> <code>int</code> <p>The row index of the data to be checked.</p> required <code>col</code> <code>int</code> <p>The column index of the data to be checked.</p> required <code>data</code> <p>The expected data to be compared with.</p> required <code>sql</code> <code>str</code> <p>The SQL query to be executed.</p> required <code>loopCount</code> <code>int</code> <p>The number of times to execute the SQL query.</p> required <code>waitTime</code> <code>int</code> <p>The time to wait (in seconds) between each execution.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the query execution fails.</p> <code>SystemExit</code> <p>If the data at the specified row and column does not match the expected data.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.checkDataMem","title":"<code>checkDataMem(sql, mem)</code>","text":"<p>Executes a SQL query and checks if the result matches the expected data.</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL query to be executed.</p> required <code>mem</code> <code>list</code> <p>The expected data, represented as a list of lists.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the expected data is not a list of lists, or if the SQL result does not match the expected data.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.checkDataMemByLine","title":"<code>checkDataMemByLine(sql, mem)</code>","text":"<p>Executes a SQL query and checks if the result matches the expected data (Same as checkDataMem).</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL query to be executed.</p> required <code>mem</code> <code>list</code> <p>The expected data, represented as a list of lists.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the expected data is not a list of lists, or if the SQL result does not match the expected data.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.checkDataNoExist","title":"<code>checkDataNoExist(row, col, data)</code>","text":"<p>Checks if the data at the specified row and column matches the expected data without exiting the program.</p> <p>Parameters:</p> Name Type Description Default <code>row</code> <code>int</code> <p>The row index of the data to be checked.</p> required <code>col</code> <code>int</code> <p>The column index of the data to be checked.</p> required <code>data</code> <p>The expected data to be compared with.</p> required <p>Returns:</p> Name Type Description <code>bool</code> <p>True if the data matches the expected data, otherwise False.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.checkDataType","title":"<code>checkDataType(row, col, dataType)</code>","text":"<p>Checks if the data type at the specified row and column matches the expected data type.</p> <p>Parameters:</p> Name Type Description Default <code>row</code> <code>int</code> <p>The row index of the data to be checked.</p> required <code>col</code> <code>int</code> <p>The column index of the data to be checked.</p> required <code>dataType</code> <code>str</code> <p>The expected data type.</p> required <p>Returns:</p> Name Type Description <code>bool</code> <p>True if the data type matches the expected data type, otherwise False.</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the specified row or column index is out of range.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.checkEqual","title":"<code>checkEqual(elm, expect_elm)</code>","text":"<p>Checks if the given element is equal to the expected element.</p> <p>Parameters:</p> Name Type Description Default <code>elm</code> <p>The element to be checked.</p> required <code>expect_elm</code> <p>The expected element to be compared with.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the element does not match the expected element.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.checkFirstValue","title":"<code>checkFirstValue(sql, expect)</code>","text":"<p>Executes a SQL query and checks if the first value in the result matches the expected value.</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL query to be executed.</p> required <code>expect</code> <p>The expected value of the first result.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the query execution fails.</p> <code>SystemExit</code> <p>If the first value in the result does not match the expected value.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.checkNotEqual","title":"<code>checkNotEqual(elm, expect_elm)</code>","text":"<p>Checks if the given element is not equal to the expected element.</p> <p>Parameters:</p> Name Type Description Default <code>elm</code> <p>The element to be checked.</p> required <code>expect_elm</code> <p>The expected element to be compared with.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the element matches the expected element.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.checkRowCol","title":"<code>checkRowCol(row, col)</code>","text":"<p>Checks if the specified row and column indices are within the range of the last query result.</p> <p>Parameters:</p> Name Type Description Default <code>row</code> <code>int</code> <p>The row index to be checked.</p> required <code>col</code> <code>int</code> <p>The column index to be checked.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the specified row or column index is out of range.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.checkRowColNoExist","title":"<code>checkRowColNoExist(row, col)</code>","text":"<p>Checks if the specified row and column indices are within the range of the last query result without exiting the program.</p> <p>Parameters:</p> Name Type Description Default <code>row</code> <code>int</code> <p>The row index to be checked.</p> required <code>col</code> <code>int</code> <p>The column index to be checked.</p> required <p>Returns:</p> Name Type Description <code>bool</code> <p>True if the specified row and column indices are within the range, otherwise False.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.checkRows","title":"<code>checkRows(expectedRows)</code>","text":"<p>Checks if the number of rows fetched by the last query matches the expected number of rows.</p> <p>Parameters:</p> Name Type Description Default <code>expectRows</code> <code>int</code> <p>The expected number of rows.</p> required <p>Returns:</p> Name Type Description <code>bool</code> <p>True if the number of rows matches the expected number, otherwise it exits the program.</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the number of rows does not match the expected number.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.checkRows_not_exited","title":"<code>checkRows_not_exited(expectedRows)</code>","text":"<p>Check if the query rows is equal to the expected rows :param expectedRows: The expected number of rows. :return: Returns True if the actual number of rows matches the expected number, otherwise returns False.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.checkRows_range","title":"<code>checkRows_range(excepte_row_list)</code>","text":"<p>Checks if the number of rows fetched by the last query is within the expected range.(Not used)</p> <p>Parameters:</p> Name Type Description Default <code>excepte_row_list</code> <code>list</code> <p>A list of expected row counts.</p> required <p>Returns:</p> Name Type Description <code>bool</code> <p>True if the number of rows is within the expected range, otherwise it exits the program.</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the number of rows is not within the expected range.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.checkSameColumn","title":"<code>checkSameColumn(c1, c2)</code>","text":"<p>Checks if the values in two specified columns are the same for all rows in the last query result.</p> <p>Parameters:</p> Name Type Description Default <code>c1</code> <code>int</code> <p>The index of the first column to be checked.</p> required <code>c2</code> <code>int</code> <p>The index of the second column to be checked.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the values in the specified columns are not the same for any row.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.close","title":"<code>close()</code>","text":"<p>Closes the cursor.</p> <p>Returns:</p> Type Description <p>None</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.error","title":"<code>error(sql, expectedErrno=None, expectErrInfo=None, fullMatched=True, show=False)</code>","text":"<p>Executes a SQL statement and checks for expected errors.</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL statement to be executed.</p> required <code>expectedErrno</code> <code>int</code> <p>The expected error number. Defaults to None.</p> <code>None</code> <code>expectErrInfo</code> <code>str</code> <p>The expected error information. Defaults to None.</p> <code>None</code> <p>Returns:</p> Name Type Description <code>str</code> <p>The error information if an error occurs.</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the expected error does not occur or if the error information does not match the expected information.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.errors","title":"<code>errors(sql_list, expected_error_id_list=None, expected_error_info_list=None)</code>","text":"<p>Executes a list of SQL queries and checks for expected errors.</p> <p>Parameters:</p> Name Type Description Default <code>sql_list</code> <code>list</code> <p>The list of SQL queries to be executed.</p> required <code>expected_error_id_list</code> <code>list</code> <p>The list of expected error numbers corresponding to each SQL query. Defaults to None.</p> <code>None</code> <code>expected_error_info_list</code> <code>list</code> <p>The list of expected error information corresponding to each SQL query. Defaults to None.</p> <code>None</code> <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the SQL list is empty, if the execution of any SQL query fails, if the expected error does not occur, or if the error information does not match the expected information.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.execute","title":"<code>execute(sql, queryTimes=10, show=False)</code>","text":"<p>Executes a SQL statement.</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL statement to be executed.</p> required <code>queryTimes</code> <code>int</code> <p>The number of times to attempt the execution in case of failure. Defaults to 10.</p> <code>10</code> <code>show</code> <code>bool</code> <p>If True, the SQL statement will be logged before execution. Defaults to False.</p> <code>False</code> <p>Returns:</p> Name Type Description <code>int</code> <p>The number of affected rows.</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the execution fails after the specified number of attempts.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.executeTimes","title":"<code>executeTimes(sql, times)</code>","text":"<p>Executes a SQL statement a specified number of times.(Not used)</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL statement to be executed.</p> required <code>times</code> <code>int</code> <p>The number of times to execute the SQL statement.</p> required <p>Returns:</p> Name Type Description <code>int</code> <p>The number of affected rows from the last execution.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.executes","title":"<code>executes(sqls, queryTimes=30, show=False)</code>","text":"<p>Executes a list of SQL statements.</p> <p>Parameters:</p> Name Type Description Default <code>sqls</code> <code>list</code> <p>The list of SQL statements to be executed.</p> required <code>queryTimes</code> <code>int</code> <p>The number of times to attempt the execution in case of failure. Defaults to 30.</p> <code>30</code> <code>show</code> <code>bool</code> <p>If True, each SQL statement will be logged before execution. Defaults to False.</p> <code>False</code> <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the execution of any SQL statement fails after the specified number of attempts.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.getColData","title":"<code>getColData(col)</code>","text":"<p>Retrieves all data from the specified column in the last query result.</p> <p>Parameters:</p> Name Type Description Default <code>col</code> <code>int</code> <p>The column index of the data to be retrieved.</p> required <p>Returns:</p> Name Type Description <code>list</code> <p>A list containing all data from the specified column.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.getColNameList","title":"<code>getColNameList(sql, col_tag=None)</code>","text":"<p>Executes a SQL query and retrieves the column names and optionally the column types.</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL query to be executed.</p> required <code>col_tag</code> <code>optional</code> <p>If provided, the method will return both column names and column types. Defaults to None.</p> <code>None</code> <p>Returns:</p> Name Type Description <code>list</code> <p>A list containing the column names.</p> <code>tuple</code> <p>A tuple containing two lists - the column names and the column types, if col_tag is provided.</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the query execution fails.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.getData","title":"<code>getData(row, col)</code>","text":"<p>Retrieves the data at the specified row and column from the last query result.</p> <p>Parameters:</p> Name Type Description Default <code>row</code> <code>int</code> <p>The row index of the data to be retrieved.</p> required <code>col</code> <code>int</code> <p>The column index of the data to be retrieved.</p> required <p>Returns:</p> Type Description <p>The data at the specified row and column.</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the specified row or column is out of range.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.getFirstValue","title":"<code>getFirstValue(sql)</code>","text":"<p>Executes a SQL query and retrieves the first value in the result.</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL query to be executed.</p> required <p>Returns:</p> Type Description <p>The first value in the result.</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the query execution fails.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.getResult","title":"<code>getResult(sql)</code>","text":"<p>Executes a SQL query and fetches the results.</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL query to be executed.</p> required <p>Returns:</p> Name Type Description <code>list</code> <p>The fetched results.</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the query execution fails.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.getRows","title":"<code>getRows()</code>","text":"<p>Retrieves the number of rows fetched by the last query.</p> <p>Returns:</p> Name Type Description <code>int</code> <p>The number of rows fetched by the last query.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.getVariable","title":"<code>getVariable(search_attr)</code>","text":"<p>Retrieves the value of a specified variable from the database.</p> <p>Parameters:</p> Name Type Description Default <code>search_attr</code> <code>str</code> <p>The name of the variable to be retrieved.</p> required <p>Returns:</p> Name Type Description <code>tuple</code> <p>A tuple containing the value of the specified variable and the list of all variables.</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the query execution fails.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.get_times","title":"<code>get_times(time_str, precision='ms')</code>","text":"<p>Converts a time string to a timestamp based on the specified precision.(Not used)</p> <p>Parameters:</p> Name Type Description Default <code>time_str</code> <code>str</code> <p>The time string to be converted. The string should end with a character indicating the time unit (e.g., 's' for seconds, 'm' for minutes).</p> required <code>precision</code> <code>str</code> <p>The precision of the timestamp. Can be \"ms\" (milliseconds), \"us\" (microseconds), or \"ns\" (nanoseconds). Defaults to \"ms\".</p> <code>'ms'</code> <p>Returns:</p> Name Type Description <code>int</code> <p>The timestamp in the specified precision.</p> <p>Raises:</p> Type Description <code>SystemExit</code> <p>If the time string does not end with a valid time unit character or if the precision is not valid.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.get_type","title":"<code>get_type(col)</code>","text":"<p>Retrieves the data type of the specified column in the last query result.(Not used)</p> <p>Parameters:</p> Name Type Description Default <code>col</code> <code>int</code> <p>The column index for which the data type is to be retrieved.</p> required <p>Returns:</p> Name Type Description <code>str</code> <p>The data type of the specified column.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.init","title":"<code>init(cursor, log=False)</code>","text":"<p>Initializes the TDSql instance with a database cursor and optionally enables logging.</p> <p>Parameters:</p> Name Type Description Default <code>cursor</code> <p>The database cursor to be used for executing SQL queries.</p> required <code>log</code> <code>bool</code> <p>If True, enables logging of SQL statements to a file. Defaults to False.</p> <code>False</code> <p>Returns:</p> Type Description <p>None</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.is_err_sql","title":"<code>is_err_sql(sql)</code>","text":"<p>Executes a SQL statement and checks if it results in an error.(Not used)</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL statement to be executed.</p> required <p>Returns:</p> Name Type Description <code>bool</code> <p>True if the SQL statement results in an error, False otherwise.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.prepare","title":"<code>prepare(dbname='db', drop=True, **kwargs)</code>","text":"<p>Prepares the database by optionally dropping it if it exists, creating it, and setting it as the active database.</p> <p>Parameters:</p> Name Type Description Default <code>dbname</code> <code>str</code> <p>The name of the database to be prepared. Defaults to \"db\".</p> <code>'db'</code> <code>drop</code> <code>bool</code> <p>If True, drops the database if it exists before creating it. Defaults to True.</p> <code>True</code> <code>**kwargs</code> <p>Additional keyword arguments to be included in the database creation statement. If duration is not provided, it defaults to 100.</p> <code>{}</code> <p>Returns:</p> Type Description <p>None</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.query","title":"<code>query(sql, row_tag=None, queryTimes=10, count_expected_res=None, show=False)</code>","text":"<p>Executes a SQL query and fetches the results.</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL query to be executed.</p> required <code>row_tag</code> <code>optional</code> <p>If provided, the method will return the fetched results. Defaults to None.</p> <code>None</code> <code>queryTimes</code> <code>int</code> <p>The number of times to attempt the query in case of failure. Defaults to 10.</p> <code>10</code> <code>count_expected_res</code> <code>optional</code> <p>If provided, the method will repeatedly execute the query until the first result matches this value or the queryTimes limit is reached. Defaults to None.</p> <code>None</code> <code>show</code> <code>bool</code> <p>If True, the SQL statement will be logged before execution. Defaults to False.</p> <code>False</code> <p>Returns:</p> Name Type Description <code>int</code> <p>The number of rows fetched if row_tag is not provided.</p> <code>list</code> <p>The fetched results if row_tag is provided.</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the query fails after the specified number of attempts.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.queryAndCheckResult","title":"<code>queryAndCheckResult(sql_list, expect_result_list)</code>","text":"<p>Executes a list of SQL queries and checks the results against the expected results.</p> <p>Parameters:</p> Name Type Description Default <code>sql_list</code> <code>list</code> <p>The list of SQL queries to be executed.</p> required <code>expect_result_list</code> <code>list</code> <p>The list of expected results corresponding to each SQL query.</p> required <p>Returns:</p> Type Description <p>None</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the execution of any SQL query fails or if the results do not match the expected results.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql.TDSql.waitedQuery","title":"<code>waitedQuery(sql, expectedRows, timeout)</code>","text":"<p>Executes a SQL query and waits until the expected number of rows is retrieved or the timeout is reached.</p> <p>Parameters:</p> Name Type Description Default <code>sql</code> <code>str</code> <p>The SQL query to be executed.</p> required <code>expectedRows</code> <code>int</code> <p>The expected number of rows to be retrieved.</p> required <code>timeout</code> <code>int</code> <p>The maximum time to wait (in seconds) for the expected number of rows to be retrieved.</p> required <p>Returns:</p> Name Type Description <code>tuple</code> <p>A tuple containing the number of rows retrieved and the time taken (in seconds).</p> <p>Raises:</p> Type Description <code>Exception</code> <p>If the query execution fails.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sql._parse_datetime","title":"<code>_parse_datetime(timestr)</code>","text":"<p>Parse a string to a datetime object. The string can be in one of the following formats: The string can be in one of the following formats: - '%Y-%m-%d %H:%M:%S.%f%z': Contains microseconds and timezone offset. - '%Y-%m-%d %H:%M:%S%z': Contains no microseconds but contains timezone offset. - '%Y-%m-%d %H:%M:%S.%f': Contains microseconds but no timezone offset. - '%Y-%m-%d %H:%M:%S': Contains no microseconds and no timezone offset.</p> <p>Parameters:</p> Name Type Description Default <code>timestr</code> <code>str</code> <p>The string to be parsed.</p> required <p>Returns:</p> Type Description <p>datetime.datetime: The datetime object parsed from the string.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sqlset","title":"<code>sqlset</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#srvCtl","title":"<code>srvCtl</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#srvCtl.srvCtl","title":"<code>srvCtl</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#srvCtl.srvCtl.clusterRootPath","title":"<code>clusterRootPath()</code>","text":"<p>Gets the root path of the cluster.</p> <p>Returns:</p> Name Type Description <code>str</code> <p>The root path of the cluster.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#srvCtl.srvCtl.dnodeCfgPath","title":"<code>dnodeCfgPath(idx)</code>","text":"<p>Gets the configuration path for a specific dnode.</p> <p>Parameters:</p> Name Type Description Default <code>idx</code> <code>int</code> <p>The index of the dnode.</p> required <p>Returns:</p> Name Type Description <code>str</code> <p>The configuration path for the dnode.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#srvCtl.srvCtl.dnodeDataFiles","title":"<code>dnodeDataFiles(idx)</code>","text":"<p>Gets the data files for a specific dnode.</p> <p>Parameters:</p> Name Type Description Default <code>idx</code> <code>int</code> <p>The index of the dnode.</p> required <p>Returns:</p> Name Type Description <code>list</code> <p>A list of data files for the dnode.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#srvCtl.srvCtl.dnodeStart","title":"<code>dnodeStart(idx)</code>","text":"<p>Starts a dnode.</p> <p>Parameters:</p> Name Type Description Default <code>idx</code> <code>int</code> <p>The index of the dnode to start.</p> required <p>Returns:</p> Name Type Description <code>bool</code> <p>True if the dnode was started successfully, False otherwise.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#srvCtl.srvCtl.dnodeStop","title":"<code>dnodeStop(idx)</code>","text":"<p>Stops a dnode.</p> <p>Parameters:</p> Name Type Description Default <code>idx</code> <code>int</code> <p>The index of the dnode to stop.</p> required <p>Returns:</p> Name Type Description <code>bool</code> <p>True if the dnode was stopped successfully, False otherwise.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#srvCtl.srvCtl.dnodeStopAll","title":"<code>dnodeStopAll()</code>","text":"<p>Stops all dnodes.</p> <p>Returns:</p> Name Type Description <code>bool</code> <p>True if all dnodes were stopped successfully, False otherwise.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#srvCtl.srvCtl.taosdFile","title":"<code>taosdFile(idx)</code>","text":"<p>Gets the path to the taosd file for a specific dnode.</p> <p>Parameters:</p> Name Type Description Default <code>idx</code> <code>int</code> <p>The index of the dnode.</p> required <p>Returns:</p> Name Type Description <code>str</code> <p>The path to the taosd file.</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#sub","title":"<code>sub</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#taosadapter","title":"<code>taosadapter</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#taosadapter.TAdapter","title":"<code>TAdapter</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#taosadapter.TAdapter.start_taosadapter","title":"<code>start_taosadapter()</code>","text":"<p>use this method, must deploy taosadapter</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#taosdemoCfg","title":"<code>taosdemoCfg</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#taosdemoCfg.TDTaosdemoCfg","title":"<code>TDTaosdemoCfg</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#taosdemoCfg.TDTaosdemoCfg.append_sql_stb","title":"<code>append_sql_stb(target, value)</code>","text":"<p>for appending sql dict into specific sql list</p> <p>Parameters:</p> Name Type Description Default <code>target</code> <code>str</code> <p>the target append list format: 'fileType_tableType' fileType: query, sub tableType: table, stable unique: 'insert_stbs'</p> required <code>value</code> <code>dict</code> <p>the sql dict going to be appended</p> required"},{"location":"util_funcs_docs/new_test_framework/utils/#taosdemoCfg.TDTaosdemoCfg.get_sql","title":"<code>get_sql(target)</code>","text":"<p>general get function for all sql lists</p> <p>Parameters:</p> Name Type Description Default <code>target</code> <code>str</code> <p>the sql list want to get format: 'fileType_tableType' fileType: query, sub tableType: table, stable unique: 'insert_stbs'</p> required"},{"location":"util_funcs_docs/new_test_framework/utils/#taosdemoCfg.TDTaosdemoCfg.get_template","title":"<code>get_template(target)</code>","text":"<p>general get function for the default sql template</p> <p>Parameters:</p> Name Type Description Default <code>target</code> <code>str</code> <p>the sql list want to get format: 'fileType_tableType' fileType: query, sub tableType: table, stable unique: 'insert_stbs'</p> required"},{"location":"util_funcs_docs/new_test_framework/utils/#taosdemoCfg.TDTaosdemoCfg.import_sql","title":"<code>import_sql(Sql_in, mode)</code>","text":"<p>used for importing the sql later used</p> <p>Parameters:</p> Name Type Description Default <code>Sql_in</code> <code>dict</code> <p>the imported sql dict</p> required <code>mode</code> <code>str</code> <p>the sql storing location within TDTaosdemoCfg format: 'fileType_tableType' fileType: query, sub tableType: table, stable</p> required"},{"location":"util_funcs_docs/new_test_framework/utils/#taosdemoCfg.TDTaosdemoCfg.pop_sql_stb","title":"<code>pop_sql_stb(target, index)</code>","text":"<p>for poping a sql dict from specific sql list</p> <p>Parameters:</p> Name Type Description Default <code>target</code> <code>str</code> <p>the target append list format: 'fileType_tableType' fileType: query, sub tableType: table, stable unique: 'insert_stbs'</p> required <code>index</code> <code>int</code> <p>the sql dict that is going to be popped</p> required"},{"location":"util_funcs_docs/new_test_framework/utils/#taoskeeper","title":"<code>taoskeeper</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#taoskeeper.TaosKeeper","title":"<code>TaosKeeper</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#taoskeeper.TaosKeeper.cfg","title":"<code>cfg(option, value)</code>","text":"<p>add param option and value to cfg file</p> <p>Parameters:</p> Name Type Description Default <code>option</code> <p>str, param name</p> required <code>value</code> <p>str, param value</p> required <p>Returns:</p> Type Description <p>None</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#taoskeeper.TaosKeeper.start","title":"<code>start()</code>","text":"<p>start taoskeeper process.</p> <p>Returns:</p> Type Description <p>None</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#taoskeeper.TaosKeeper.stop","title":"<code>stop(force_kill=False)</code>","text":"<p>stop taoskeeper process.</p> <p>Parameters:</p> Name Type Description Default <code>force_kill</code> <p>bool, whether to force kill the process default: False if True, use kill -9 if False, use kill -15</p> <code>False</code> <p>Returns:</p> Type Description <p>None</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#taoskeeper.TaosKeeper.update_cfg","title":"<code>update_cfg(update_dict)</code>","text":"<p>update taoskeeper cfg file</p> <p>Parameters:</p> Name Type Description Default <code>update_dict</code> <code>dict</code> <p>dict, update dict example: {\"log\": {\"path\": \"/var/log/taos\"}}</p> required <p>Returns:</p> Type Description <p>None</p>"},{"location":"util_funcs_docs/new_test_framework/utils/#tserror","title":"<code>tserror</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#types","title":"<code>types</code>","text":""},{"location":"util_funcs_docs/new_test_framework/utils/#types.TDSmlProtocolType","title":"<code>TDSmlProtocolType</code>","text":"<p>Schemaless Protocol types 0 - unknown 1 - InfluxDB Line Protocol 2 - OpenTSDB Telnet Protocl 3 - OpenTSDB JSON Protocol</p>"}]}